!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o,r,s=this;H5P.EventDispatcher.call(s),s.contentId=t,s.contentData=n,s.instanceIndex=S(),s.bookmarksMenuId="interactive-video-"+this.contentId+"-bookmarks-chooser",s.endscreensMenuId="interactive-video-"+this.contentId+"-endscreens-chooser",s.qualityMenuId="interactive-video-"+this.contentId+"-quality-chooser",s.captionsMenuId="interactive-video-"+this.contentId+"-captions-chooser",s.playbackRateMenuId="interactive-video-"+this.contentId+"-playback-rate-chooser",s.popupMenuButtons=[],s.popupMenuChoosers=[],s.isMinimal=!1,s.options=y.extend({video:{},assets:{}},e.interactiveVideo),s.options.video.startScreenOptions=s.options.video.startScreenOptions||{},s.qualities=void 0,s.options.video.startScreenOptions.title||(s.options.video.startScreenOptions.title="Interactive Video"),s.startScreenOptions=y.extend({hideStartTitle:!1,shortStartDescription:""},s.options.video.startScreenOptions),e.override&&(e.override.showSolutionButton||e.override.retryButton)&&(s.override={},e.override.showSolutionButton&&(s.override.enableSolutionsButton="on"===e.override.showSolutionButton),e.override.retryButton&&(s.override.enableRetry="on"===e.override.retryButton)),void 0!==e.override&&(s.showRewind10=void 0!==e.override.showRewind10&&e.override.showRewind10,s.showBookmarksmenuOnLoad=void 0!==e.override.showBookmarksmenuOnLoad&&e.override.showBookmarksmenuOnLoad,s.preventSkipping=e.override.preventSkipping||!1,s.deactivateSound=e.override.deactivateSound||!1),s.l10n=y.extend({interaction:"Interaction",play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",quality:"Video quality",captions:"Captions",close:"Close",fullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",summary:"Summary",bookmarks:"Bookmarks",endscreens:"Submit Screens",defaultAdaptivitySeekLabel:"Continue",continueWithVideo:"Continue with video",more:"More",playbackRate:"Playback rate",rewind10:"Rewind 10 seconds",navDisabled:"Navigation is disabled",sndDisabled:"Sound is disabled",requiresCompletionWarning:"You need to answer all the questions correctly before continuing.",back:"Back",hours:"Hours",minutes:"Minutes",seconds:"Seconds",currentTime:"Current time:",totalTime:"Total time:",navigationHotkeyInstructions:"Use key 'k' for starting and stopping video at any time",singleInteractionAnnouncement:"Interaction appeared:",multipleInteractionsAnnouncement:"Multiple interactions appeared:",videoPausedAnnouncement:"Video was paused",content:"Content",answered:"@answered answered!"},e.l10n),n&&void 0!==n.previousState&&void 0!==n.previousState.progress&&void 0!==n.previousState.answers&&(s.previousState=n.previousState),s.menuitems=[],s.lastState=H5P.Video.ENDED,s.justVideo=!1;var a=navigator.userAgent.match(/(iPhone|iPod) OS (\d*)_/i);null!==a&&3===a.length&&(s.justVideo=a[2]<10),o=s.previousState&&s.previousState.progress?Math.floor(s.previousState.progress):0,0===o&&e.override&&e.override.startVideoAt&&(o=e.override.startVideoAt),s.interactionsProgress=[],s.previousState&&s.previousState.interactionsProgress&&(s.interactionsProgress=s.previousState.interactionsProgress),r=e.override&&!!e.override.loop,this.autoplay=e.override&&!!e.override.autoplay,s.$videoWrapper=y("<div>",{class:"h5p-video-wrapper"}),s.$controls=y("<div>",{role:"toolbar",class:"h5p-controls hidden"}),s.$read=y("<div/>",{"aria-live":"polite",class:"hidden-but-read"}),this.fontSize=16,this.width=640;var l=!1,c=!0,u=!1;if(s.isTask=!1,s.interactions=[],s.options.assets.interactions)for(var d=0;d<s.options.assets.interactions.length;d++)this.initInteraction(d);s.initialize=function(){if(!u){if(u=!0,s.on("resize",function(){s.resize()}),s.video=H5P.newRunnable({library:"H5P.Video 1.3",params:{sources:s.options.video.files,visuals:{poster:s.options.video.startScreenOptions.poster,controls:s.justVideo,fit:!1,disableRemotePlayback:!0},startAt:o,a11y:s.options.video.textTracks}},s.contentId,void 0,void 0,{parent:s}),s.justVideo)return void s.video.on("loaded",function(){s.trigger("resize")});s.video.on("loaded",function(){l=!0,s.loaded()}),s.video.on("error",function(){s.removeSplash()}),s.video.on("stateChange",function(t){!s.controls&&l&&(s.addControls(),s.trigger("resize"));var n=t.data;if(s.currentState!==i.SEEKING)switch(n){case H5P.Video.ENDED:s.currentState=H5P.Video.ENDED,s.controls.$play.addClass("h5p-pause").attr("aria-label",s.l10n.play),s.timeUpdate(s.video.getCurrentTime()),s.updateCurrentTime(s.getDuration());var o=s.interactions.map(function(e){return e.getProgress()||0}).reduce(function(e,t){return e+t},0);if(s.endscreensMap[s.getDuration()]&&o>0&&s.toggleEndscreen(!0),r){s.video.play();var a=e.override&&e.override.startVideoAt?e.override.startVideoAt:0;s.video.seek(a)}break;case H5P.Video.PLAYING:c&&(s.addQualityChooser(),s.addPlaybackRateChooser(),s.removeSplash(),s.startUpdatingBufferBar(),s.toggleBookmarksChooser(!1,{firstPlay:c}),s.toggleEndscreensChooser(!1,{firstPlay:c}),c=!1),s.currentState=H5P.Video.PLAYING,s.controls.$play.removeClass("h5p-pause").attr("aria-label",s.l10n.pause),s.controls.$play.is(":focus")&&(s.controls.$play.blur(),s.controls.$play.focus()),s.timeUpdate(s.video.getCurrentTime());break;case H5P.Video.PAUSED:s.currentState=H5P.Video.PAUSED,s.controls.$play.addClass("h5p-pause").attr("aria-label",s.l10n.play),s.focusInteraction?(s.focusInteraction.focusOnFirstTabbableElement(),delete s.focusInteraction):s.controls.$play.is(":focus")&&(s.controls.$play.blur(),s.controls.$play.focus()),s.timeUpdate(s.video.getCurrentTime());break;case H5P.Video.BUFFERING:s.currentState=H5P.Video.BUFFERING,s.removeSplash(),s.startUpdatingBufferBar()}}),s.video.on("qualityChange",function(e){var t=e.data;if(s.controls&&s.controls.$qualityChooser){if("YouTube"===this.getHandlerName()){if(!s.qualities)return;var n=s.qualities.filter(function(t){return t.name===e.data})[0];return void s.controls.$qualityChooser.find("li").attr("data-quality",e.data).html(n.label)}s.controls.$qualityChooser.find("li").attr("aria-checked","false").filter('[data-quality="'+t+'"]').attr("aria-checked","true")}}),s.video.on("playbackRateChange",function(e){var t=e.data;s.controls&&s.controls.$playbackRateChooser&&s.controls.$playbackRateChooser.find("li").attr("aria-checked","false").filter('[playback-rate="'+t+'"]').attr("aria-checked","true")}),s.on("enterFullScreen",function(){var e=this;s.hasFullScreen=!0,s.$container.parent(".h5p-content").css("height","100%"),s.controls.$fullscreen.addClass("h5p-exit").attr("aria-label",s.l10n.exitFullscreen),s.controls.$fullscreen.blur(),s.controls.$fullscreen.focus(),s.resizeInteractions(),setTimeout(function(){void 0!==e.bubbleEndscreen&&e.bubbleEndscreen.update()},225)}),s.on("exitFullScreen",function(){s.$container.hasClass("h5p-standalone")&&s.$container.hasClass("h5p-minimal")&&s.pause(),s.hasFullScreen=!1,s.$container.parent(".h5p-content").css("height",""),s.controls.$fullscreen.removeClass("h5p-exit").attr("aria-label",s.l10n.fullscreen),s.controls.$fullscreen.blur(),s.controls.$fullscreen.focus(),s.resizeInteractions(),s.dnb&&s.dnb.dialog&&!s.hasUncompletedRequiredInteractions()&&s.dnb.dialog.close()}),s.video.on("captions",function(e){s.controls||(s.addControls(),s.trigger("resize")),s.setCaptionTracks(e.data)}),s.accessibility=new f.default(s.l10n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CODE_START_PAUSE=void 0;var r=n(9),s=o(r),a=n(1),l=o(a),c=n(3),u=o(c),d=n(12),h=o(d),p=n(13),f=o(p),v=n(14),m=o(v),b=n(15),g=o(b),y=H5P.jQuery;i.prototype=Object.create(H5P.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.setCaptionTracks=function(e){var t=this;if(e.unshift(new H5P.Video.LabelValue("Off","off")),t.captionsTrackSelector)return void t.captionsTrackSelector.updateOptions(e);var n=t.video.getCaptionsTrack();n||(n=e[0]),t.captionsTrackSelector=new s.default("captions",e,n,"menuitemradio",t.l10n,t.contentId),t.controls.$captionsButton=y(t.captionsTrackSelector.control),t.popupMenuButtons.push(t.controls.$captionsButton),y(t.captionsTrackSelector.control).insertAfter(t.controls.$volume),y(t.captionsTrackSelector.popup).css(t.controlsCss).insertAfter(y(t.captionsTrackSelector.control)),t.popupMenuChoosers.push(y(t.captionsTrackSelector.popup)),y(t.captionsTrackSelector.overlayControl).insertAfter(t.controls.$qualityButtonMinimal),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.captionsTrackSelector.overlayControl),t.captionsTrackSelector.on("select",function(e){t.video.setCaptionsTrack("off"===e.data.value?null:e.data)}),t.captionsTrackSelector.on("close",function(){"true"===t.controls.$more.attr("aria-expanded")&&t.controls.$more.click(),t.resumeVideo()}),t.captionsTrackSelector.on("open",function(){t.controls.$overlayButtons.addClass("h5p-hide"),t.closePopupMenus(t.controls.$captionsButton)}),t.minimalMenuKeyboardControls.insertElementAt(t.captionsTrackSelector.overlayControl,2)},i.prototype.getCurrentState=function(){var e=this;if(e.video.play){var t={progress:e.video.getCurrentTime(),answers:[],interactionsProgress:e.interactions.slice().sort(function(e,t){return e.getDuration().from-t.getDuration().from}).map(function(e){return e.getProgress()})};if(void 0!==e.interactions)for(var n=0;n<e.interactions.length;n++)t.answers[n]=e.interactions[n].getCurrentState();return t.progress?t:e.previousState&&e.previousState.progress?e.previousState:void 0}},i.prototype.removeSplash=function(){void 0!==this.$splash&&(this.$splash.remove(),delete this.$splash)},i.prototype.attach=function(e){var t=this,n=this;this.$container=e,this.initialize(),void 0!==this.isRoot&&this.isRoot()&&this.setActivityStarted(),e.addClass("h5p-interactive-video").html(""),this.$videoWrapper.appendTo(e),this.$controls.appendTo(e);var o=!1;if(this.interactions&&this.interactions.forEach(function(e){e.reCreate(),e.isAnswerable()&&(o=!0)}),this.hasStar=this.editor||void 0!==this.options.assets.endscreens&&o,this.attachVideo(this.$videoWrapper),this.justVideo)return this.$videoWrapper.find("video").css("minHeight","200px"),void e.children(":not(.h5p-video-wrapper)").remove();this.$read.appendTo(e),this.readText=null,void 0===this.editor?(this.dnb=new H5P.DragNBar([],this.$videoWrapper,this.$container,{disableEditor:!0}),this.dnb.dialog.on("open",function(){n.lastState=n.currentState,n.currentState!==H5P.Video.PAUSED&&n.currentState!==H5P.Video.ENDED&&n.video.pause()}),this.dnb.dialog.on("close",function(){n.restoreTabIndexes(),n.lastState!==H5P.Video.PAUSED&&n.lastState!==H5P.Video.ENDED&&n.video.play(),n.handleAnswered()})):n.on("dnbEditorReady",function(){n.dnb=n.editor.dnb,n.dnb.dialog.disableOverlay=!0}),this.video.pressToPlay||(this.currentState===i.LOADED?this.addControls():this.addSplash()),e.attr("tabindex","-1"),e.on("keyup",function(e){var o=n.controls&&n.controls.$play,i=75===e.which;if(o&&i){if("INPUT"===e.target.nodeName)return;if(t.hasUncompletedRequiredInteractions()){var r=y(document.activeElement);t.showWarningMask().find(".h5p-button-back").click(function(){return r.focus()})}else n.controls.$play.click()}}),this.$container.prepend(y(this.accessibility.getHotkeyInstructor())),this.$container.append(y(this.accessibility.getInteractionAnnouncer())),this.currentState=i.ATTACHED,this.autoplay&&n.video.play()},i.prototype.attachVideo=function(e){this.video.attach(e),this.justVideo||(this.$overlay=y('<div class="h5p-overlay h5p-ie-transparent-background"></div>').appendTo(e))},i.prototype.addSplash=function(){var e=this;void 0!==this.editor||this.video.pressToPlay||!this.video.play||this.$splash||(this.$splash=y('<div class="h5p-splash-wrapper"><div class="h5p-splash-outer"><div class="h5p-splash" role="button" tabindex="0" aria-label="'+this.options.video.startScreenOptions.title+'"><div class="h5p-splash-main"><div class="h5p-splash-main-outer"><div class="h5p-splash-main-inner"><div class="h5p-splash-play-icon" aria-label="'+this.l10n.play+'"></div><div class="h5p-splash-title">'+this.options.video.startScreenOptions.title+'</div></div></div></div><div class="h5p-splash-footer"><div class="h5p-splash-footer-holder"><div class="h5p-splash-description">'+e.startScreenOptions.shortStartDescription+"</div></div></div></div></div></div>").click(function(){e.video.play()}).appendTo(this.$overlay).find(".h5p-interaction-button").click(function(){return!1}).end(),y(".h5p-splash",this.$splash).keydown(function(t){var n=t.which;32!==n&&13!==n||(e.video.play(),t.preventDefault(),e.$controls.find(".h5p-play").focus())}),void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||this.$splash.addClass("no-description"),this.startScreenOptions.hideStartTitle&&this.$splash.addClass("no-title"))},i.prototype.getDuration=function(){return void 0===this.duration&&(this.duration=this.video.getDuration()),this.duration},i.prototype.addControls=function(){var e=this,t=this;this.addSplash(),this.attachControls(this.$controls.removeClass("hidden"));var n=this.getDuration(),o=i.humanizeTime(n),r=i.formatTimeForA11y(n,t.l10n);this.controls.$totalTime.find(".human-time").html(o),this.controls.$totalTime.find(".hidden-but-read").html(t.l10n.totalTime+" "+r),this.controls.$slider.slider("option","max",n),this.bookmarkMenuKeyboardControls=new l.default([new u.default]),this.bookmarkMenuKeyboardControls.on("close",function(){return e.toggleBookmarksChooser(!1)}),this.endscreenMenuKeyboardControls=new l.default([new u.default]),this.endscreenMenuKeyboardControls.on("close",function(){return e.toggleEndscreensChooser(!1)}),this.addSliderInteractions(),this.addBookmarks(),this.addEndscreenMarkers(),this.addBubbles(),this.trigger("controls")},i.prototype.loaded=function(){var e=this.getDuration();if(this.oneSecondInPercentage=100/e,e=Math.floor(e),void 0!==this.editor){var t=w("interactions",this.editor.field.fields),n=w("duration",t.field.fields).fields;n[0].max=n[1].max=e,n[0].min=n[1].min=0;for(var o=w("adaptivity",t.field.fields).fields,r=0;r<o.length;r++)o[r].fields&&(w("seekTo",o[r].fields).max=e)}if(this.hasMainSummary()){var s=e-this.options.summary.displayAt;s<0&&(s=0),void 0===this.options.assets.interactions&&(this.options.assets.interactions=[]),this.options.assets.interactions.push({action:this.options.summary.task,x:80,y:80,duration:{from:s,to:e},displayType:"button",bigDialog:!0,className:"h5p-summary-interaction h5p-end-summary",label:"<p>"+this.l10n.summary+"</p>",mainSummary:!0}),this.initInteraction(this.options.assets.interactions.length-1)}this.currentState===i.ATTACHED&&(this.video.pressToPlay||this.addControls(),this.trigger("resize")),this.currentState=i.LOADED},i.prototype.initInteraction=function(e){var t=this,n=t.options.assets.interactions[e];if(t.override){var o={};n.adaptivity&&n.adaptivity.requireCompletion&&(o.enableRetry=!0),H5P.jQuery.extend(n.action.params.behaviour,t.override,o)}var i;void 0!==t.previousState&&void 0!==t.previousState.answers&&null!==t.previousState.answers[e]&&(i=t.previousState.answers[e]);var r=new h.default(n,t,i);return r.on("display",function(e){var n=e.data;n.appendTo(t.$overlay),r.repositionToWrapper(t.$videoWrapper);var o=void 0!==t.video.pressToPlay;$(o?100:null,function(){(t.currentState===H5P.Video.PLAYING||t.currentState===H5P.Video.BUFFERING)&&r.pause()&&(t.focusInteraction||(t.focusInteraction=r),t.video.pause())}),t.seekingTo&&(t.seekingTo=void 0,n.focus()),setTimeout(function(){r.positionLabel(t.$videoWrapper.width())},0),t.toggleEndscreen(!1)}),r.on("hide",function(){t.handleAnswered()}),r.on("xAPI",function(e){var n=e.getVerb();"interacted"===n&&this.setProgress(h.default.PROGRESS_INTERACTED),-1!==y.inArray(n,["completed","answered"])&&e.setVerb("answered"),void 0===e.data.statement.context.extensions&&(e.data.statement.context.extensions={}),e.data.statement.context.extensions["http://id.tincanapi.com/extension/ending-point"]="PT"+Math.floor(t.video.getCurrentTime())+"S"}),t.interactions.push(r),r},i.prototype.handleAnswered=function(){var e=this;e.interactions.forEach(function(t){t.getProgress()===h.default.PROGRESS_INTERACTED&&(t.setProgress(h.default.PROGRESS_ANSWERED),t.$menuitem.addClass("h5p-interaction-answered"),e.hasStar&&(e.playStarAnimation(),e.playBubbleAnimation(e.l10n.answered.replace("@answered","<strong>"+e.getAnsweredTotal()+"</strong>")),e.endscreen.update(e.interactions)))})},i.prototype.getAnsweredTotal=function(){return this.interactions.filter(function(e){return e.getProgress()===h.default.PROGRESS_ANSWERED}).length},i.prototype.hasMainSummary=function(){var e=this.options.summary;return!(void 0===e||void 0===e.displayAt||void 0===e.task||void 0===e.task.params||void 0===e.task.params.summaries||!e.task.params.summaries.length||void 0===e.task.params.summaries[0].summary||!e.task.params.summaries[0].summary.length)},i.prototype.addSliderInteractions=function(){var e=this,t=this;this.controls.$interactionsContainer.children().remove(),H5P.jQuery.extend([],this.interactions).sort(function(e,t){return e.getDuration().from-t.getDuration().from}).forEach(function(n){var o=n.addDot();t.menuitems.push(o),void 0===t.previousState&&t.interactionsProgress.push(void 0),t.interactionsProgress[t.menuitems.length-1]===h.default.PROGRESS_ANSWERED&&(n.setProgress(t.interactionsProgress[t.menuitems.length-1]),o.addClass("h5p-interaction-answered")),void 0!==o&&(o.appendTo(e.controls.$interactionsContainer),e.preventSkipping||e.interactionKeyboardControls.addElement(o.get(0)))})},i.prototype.closePopupMenus=function(e){this.popupMenuButtons.forEach(function(t){void 0!==t&&t!==e&&void 0===t.attr("aria-disabled")&&"true"===t.attr("aria-expanded")&&t.click()})},i.prototype.displayBookmarks=function(){return this.options.assets.bookmarks&&this.options.assets.bookmarks.length&&!this.preventSkipping},i.prototype.addBookmarks=function(){if(this.bookmarksMap={},void 0!==this.options.assets.bookmarks&&!this.preventSkipping)for(var e=0;e<this.options.assets.bookmarks.length;e++)this.addBookmark(e)},i.prototype.addEndscreenMarkers=function(){if(this.endscreensMap={},void 0!==this.options.assets.endscreens)for(var e=0;e<this.options.assets.endscreens.length;e++)this.addEndscreen(e);this.editor&&this.editor.freshVideo&&(this.endscreensMap[this.getDuration()]||this.editor.addEndscreen(this.getDuration(),!0))},i.prototype.addBubbles=function(){!this.editor&&this.hasStar&&(this.bubbleScore=new m.default(this.$star),this.endscreen=new g.default(this,{l10n:{title:this.l10n.endcardTitle,information:this.l10n.endcardInformation,informationNoAnswers:this.l10n.endcardInformationNoAnswers,informationMustHaveAnswer:this.l10n.endcardInformationMustHaveAnswer,submitButton:this.l10n.endcardSubmitButton,submitMessage:this.l10n.endcardSubmitMessage,tableRowAnswered:this.l10n.endcardTableRowAnswered,tableRowScore:this.l10n.endcardTableRowScore,answeredScore:this.l10n.endcardAnsweredScore}}),this.endscreen.update(this.interactions),this.bubbleEndscreen=new m.default(this.$star,{content:this.endscreen.getDOM(),maxWidth:"auto",style:"h5p-interactive-video-bubble-endscreen",mode:"full"}))},i.prototype.toggleBookmarksChooser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keepStopped:!1,firstPlay:!1};if(this.controls.$bookmarksButton){e=void 0===e?!this.controls.$bookmarksChooser.hasClass("h5p-show"):e;var n=this.controls.$bookmarksChooser.hasClass("h5p-show");this.controls.$minimalOverlay.toggleClass("h5p-show",e),this.controls.$minimalOverlay.find(".h5p-minimal-button").toggleClass("h5p-hide",e),this.controls.$bookmarksButton.attr("aria-expanded",!!e&&"true"),this.controls.$more.attr("aria-expanded",e?"true":"false"),this.controls.$bookmarksChooser.css({maxHeight:e?this.controlsCss.maxHeight:"32px"}).toggleClass("h5p-show",e).toggleClass("h5p-transitioning",e||n)}e?(this.closePopupMenus(this.controls.$bookmarksButton),this.controls.$bookmarksChooser.find('[tabindex="0"]').first().focus(),this.editor&&(this.interruptVideo(),this.updateChooserTime(this.controls.$bookmarksChooser,".h5p-add-bookmark"))):t.firstPlay||(this.editor&&!t.keepStopped&&this.resumeVideo(),this.controls.$bookmarksChooser.hasClass("h5p-show")||this.controls.$bookmarksButton.focus())},i.prototype.toggleEndscreensChooser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keepStopped:!1,firstPlay:!1};if(this.editor&&this.controls.$endscreensButton){e=void 0===e?!this.controls.$endscreensChooser.hasClass("h5p-show"):e;var n=this.controls.$endscreensChooser.hasClass("h5p-show");this.controls.$minimalOverlay.toggleClass("h5p-show",e),this.controls.$minimalOverlay.find(".h5p-minimal-button").toggleClass("h5p-hide",e),this.controls.$endscreensButton.attr("aria-expanded",e?"true":"false").toggleClass("h5p-star-active-editor",e),this.controls.$more.attr("aria-expanded",e?"true":"false");var o=-10+Math.min(0,this.$container.outerWidth()-this.controls.$endscreensChooser.parent().offset().left-this.controls.$endscreensChooser.outerWidth())+"px";this.controls.$endscreensChooser.css({maxHeight:e?this.controlsCss.maxHeight:"32px"}).css({left:o}).toggleClass("h5p-show",e).toggleClass("h5p-transitioning",e||n)}e?(this.closePopupMenus(this.controls.$endscreensButton),this.editor&&(this.interruptVideo(),this.updateChooserTime(this.controls.$endscreensChooser,".h5p-add-endscreen")),this.controls.$endscreensChooser.find('[tabindex="0"]').first().focus()):t.firstPlay||(this.editor&&!t.keepStopped&&this.resumeVideo(),this.controls.$endscreensChooser.hasClass("h5p-show")||this.controls.$endscreensButton.focus())},i.prototype.updateChooserTime=function(e,t){var n=e.find(t);n.html(n.data("default").replace("@timecode",i.humanizeTime(this.video.getCurrentTime())))},i.prototype.interruptVideo=function(){this.currentState===H5P.Video.PLAYING&&(this.interruptedTemporarily=!0,this.video.pause())},i.prototype.resumeVideo=function(e){if(!e){if(!this.interruptedTemporarily)return;if(this.popupMenuChoosers.some(function(e){return e.hasClass("h5p-show")}))return}this.interruptedTemporarily=!1,this.video.play()},i.prototype.toggleEndscreen=function(e){!this.editor&&this.hasStar&&(e=void 0===e?!this.bubbleEndscreen.isActive():e,e?(this.stateBeforeEndscreen=this.currentState,this.video.pause()):this.stateBeforeEndscreen===H5P.Video.PLAYING&&(this.video.play(),this.stateBeforeEndscreen=void 0),this.controls.$endscreensButton.toggleClass("h5p-star-active",e),this.bubbleEndscreen.toggle(e,!0))},i.prototype.showPreventSkippingMessage=function(e){var t=this;t.preventSkippingWarningTimeout||(t.$preventSkippingMessage||(t.$preventSkippingMessage=y("<div>",{class:"h5p-prevent-skipping-message",appendTo:t.controls.$bookmarksContainer}),t.$preventSkippingMessage=y("<div>",{class:"h5p-prevent-skipping-message",appendTo:t.controls.$endscreensContainer}),t.$preventSkippingMessageText=y("<div>",{class:"h5p-prevent-skipping-message-text",html:t.l10n.navDisabled,appendTo:t.$preventSkippingMessage}),t.$preventSkippingMessageTextA11y=y("<div>",{class:"hidden-but-read",html:t.l10n.navDisabled,appendTo:t.controls.$slider})),t.$preventSkippingMessage.css("left",e),setTimeout(function(){t.$preventSkippingMessage.addClass("h5p-show").attr("aria-hidden","false")},0),t.preventSkippingWarningTimeout=setTimeout(function(){t.$preventSkippingMessage.removeClass("h5p-show").attr("aria-hidden","true"),setTimeout(function(){t.preventSkippingWarningTimeout=void 0},500)},2e3))},i.prototype.onBookmarkSelect=function(e,t){var n=this;n.currentState!==H5P.Video.PLAYING&&(e.mouseover().mouseout(),setTimeout(function(){n.timeUpdate(n.video.getCurrentTime())},0)),"true"===n.controls.$more.attr("aria-expanded")&&n.$container.hasClass("h5p-minimal")?n.controls.$more.click():n.toggleBookmarksChooser(!1),n.video.play(),n.video.seek(t.time);var o=i.formatTimeForA11y(t.time,n.l10n);setTimeout(function(){return n.read(n.l10n.currentTime+" "+o)},150)},i.prototype.onEndscreenSelect=function(e,t){var n=this;n.currentState!==H5P.Video.PLAYING&&(e.mouseover().mouseout(),setTimeout(function(){n.timeUpdate(n.video.getCurrentTime())},0)),"true"===n.controls.$more.attr("aria-expanded")&&n.$container.hasClass("h5p-minimal")?n.controls.$more.click():n.toggleEndscreensChooser(!1),n.video.play(),n.video.seek(t.time);var o=i.formatTimeForA11y(t.time,n.l10n);setTimeout(function(){return n.read(n.l10n.currentTime+" "+o)},150)},i.prototype.addBookmark=function(e,t){var n=this,o=n.options.assets.bookmarks[e];void 0===t&&(t=Math.floor(10*o.time)/10);var i=n.bookmarksMap[t]=y('<div class="h5p-bookmark" style="left:'+o.time*n.oneSecondInPercentage+'%"><div class="h5p-bookmark-label"><div class="h5p-bookmark-text">'+o.label+"</div></div></div>").appendTo(n.controls.$bookmarksContainer).data("id",e).hover(function(){void 0!==n.bookmarkTimeout&&clearTimeout(n.bookmarkTimeout),n.controls.$bookmarksContainer.children(".h5p-show").removeClass("h5p-show"),i.addClass("h5p-show")},function(){n.bookmarkTimeout=setTimeout(function(){i.removeClass("h5p-show")},n.editor?1e3:2e3)});i.find(".h5p-bookmark-label").css("maxWidth",parseInt(n.controls.$slider.parent().css("marginRight"))-35),void 0===n.controls.$bookmarksList&&(n.controls.$bookmarksList=y('<ul role="menu"></ul>').insertAfter(n.controls.$bookmarksChooser.find("h3")));var r=y('<li role="menuitem" aria-describedby="'+n.bookmarksMenuId+'">'+o.label+"</li>").click(function(){return n.onBookmarkSelect(i,o)}).keydown(function(e){32!==e.which&&13!==e.which||n.onBookmarkSelect(i,o),e.stopPropagation()});n.bookmarkMenuKeyboardControls.addElement(r.get(0));var s=n.controls.$bookmarksList.children(":eq("+e+")");return 0!==s.length?r.insertBefore(s):r.appendTo(n.controls.$bookmarksList),n.on("bookmarksChanged",function(o){var s=o.data.index,a=o.data.number;s===e&&a<0?(r.remove(),delete n.bookmarksMap[t]):e>=s&&(e+=a,i.data("id",e))}),n.trigger("bookmarkAdded",{bookmark:i}),i},i.prototype.addEndscreen=function(e,t){var n=this,o=n.options.assets.endscreens[e];void 0===t&&(t=Math.floor(10*o.time)/10);var i;if(!this.editor)return n.getDuration()-t<1&&(t=n.getDuration()),void(i=n.endscreensMap[t]=!0);i=n.endscreensMap[t]=y('<div class="h5p-endscreen" style="left:'+o.time*n.oneSecondInPercentage+'%"><div class="h5p-endscreen-label"><div class="h5p-endscreen-text">'+o.label+"</div></div></div>").appendTo(n.controls.$endscreensContainer).data("id",e).hover(function(){void 0!==n.endscreenTimeout&&clearTimeout(n.endscreenTimeout),n.controls.$endscreensContainer.children(".h5p-show").removeClass("h5p-show"),i.addClass("h5p-show")},function(){n.endscreenTimeout=setTimeout(function(){i.removeClass("h5p-show")},n.editor?1e3:2e3)}),n.editor&&(n.endscreenTimeout=setTimeout(function(){i.removeClass("h5p-show")},1e3)),i.find(".h5p-endscreen-label").css("maxWidth",parseInt(n.controls.$slider.parent().css("marginRight"))-35),void 0===n.controls.$endscreensList&&(n.controls.$endscreensList=y('<ul role="menu"></ul>').insertAfter(n.controls.$endscreensChooser.find("h3")));var r=y('<li role="menuitem" aria-describedby="'+n.endscreensMenuId+'">'+o.label+"</li>").click(function(){return n.onEndscreenSelect(i,o)}).keydown(function(e){32!==e.which&&13!==e.which||n.onEndscreenSelect(i,o),e.stopPropagation()});n.endscreenMenuKeyboardControls.addElement(r.get(0));var s=n.controls.$endscreensList.children(":eq("+e+")");return 0!==s.length?r.insertBefore(s):r.appendTo(n.controls.$endscreensList),n.on("endscreensChanged",function(o){var s=o.data.index,a=o.data.number;s===e&&a<0?(r.remove(),delete n.endscreensMap[t]):e>=s&&(e+=a,i.data("id",e))}),n.trigger("endscreenAdded",{endscreen:i}),i},i.prototype.attachControls=function(e){var t=this,n=y("<div/>",{class:"h5p-controls-left",appendTo:e}),o=y("<div/>",{class:"h5p-control h5p-slider",appendTo:e});t.hasStar&&(t.$star=y("<div/>",{class:"h5p-control h5p-star",appendTo:e}),t.$starBar=y("<div/>",{class:"h5p-control h5p-star h5p-star-bar",appendTo:t.$star}),y("<div/>",{class:"h5p-control h5p-star h5p-star-background",appendTo:t.$star}),t.$starAnimation=y("<div/>",{class:"h5p-control h5p-star h5p-star-animation h5p-star-animation-inactive",appendTo:t.$star}));var r=y("<div/>",{class:"h5p-controls-right",appendTo:e});t.preventSkipping&&t.setDisabled(o),t.controls={},t.controls.$play=t.createButton("play","h5p-control h5p-pause",n,function(){var e=t.isDisabled(t.controls.$play);if(t.controls.$play.hasClass("h5p-pause")&&!e){var n=!screen||Math.min(screen.width,screen.height)<=t.width;!t.hasFullScreen&&n&&t.$container.hasClass("h5p-standalone")&&t.$container.hasClass("h5p-minimal")&&t.toggleFullScreen(),t.video.play(),t.toggleEndscreen(!1),t.closePopupMenus()}else t.video.pause();t.handleAnswered()}),t.showRewind10&&(t.controls.$rewind10=t.createButton("rewind10","h5p-control",n,function(){if(t.video.getCurrentTime()>0){var e=Math.max(t.video.getCurrentTime()-10,0);t.video.seek(e),t.currentState===H5P.Video.PAUSED&&t.timeUpdate(e),t.currentState===H5P.Video.ENDED&&t.video.play()}}));var s=function(){var e=t.$container.hasClass("h5p-minimal")&&"true"===t.controls.$more.attr("aria-expanded");return e&&t.controls.$more.click(),e},a=function(e,n){return function(){var o=t.controls[e],i=t.controls[n],r="true"===o.attr("aria-disabled"),a="true"===o.attr("aria-expanded");r||(a?(o.attr("aria-expanded","false"),i.hasClass("h5p-show")||o.focus(),i.removeClass("h5p-show"),s(),t.resumeVideo()):(o.attr("aria-expanded","true"),i.addClass("h5p-show"),i.find('[tabindex="0"]').focus(),t.closePopupMenus(o)))}},c=t.editor||t.displayBookmarks();if(c&&(t.controls.$bookmarksChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-bookmarks",role:"dialog",html:'<h3 id="'+t.bookmarksMenuId+'">'+t.l10n.bookmarks+"</h3>"}),t.popupMenuChoosers.push(t.controls.$bookmarksChooser),t.controls.$bookmarksChooser.append(y("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return t.toggleBookmarksChooser()},keydown:function(e){13!==e.which&&32!==e.which||(t.toggleBookmarksChooser(),e.preventDefault())}})),t.showRewind10&&t.controls.$bookmarksChooser.addClass("h5p-rewind-displacement"),t.controls.$bookmarksButton=t.createButton("bookmarks","h5p-control",n,function(){t.toggleBookmarksChooser()}),t.controls.$bookmarksButton.attr("aria-haspopup","true"),t.controls.$bookmarksButton.attr("aria-expanded","false"),t.controls.$bookmarksChooser.insertAfter(t.controls.$bookmarksButton),t.controls.$bookmarksChooser.bind("transitionend",function(){t.controls.$bookmarksChooser.removeClass("h5p-transitioning")}),t.popupMenuButtons.push(t.controls.$bookmarksButton)),t.hasStar){var d=t.editor?"star h5p-star-foreground-editor":"star h5p-star-foreground",h=t.editor?function(){return t.toggleEndscreensChooser()}:function(){return t.toggleEndscreen()};t.controls.$endscreensButton=t.createButton(d,"h5p-control",t.$star,h),t.controls.$endscreensButton.attr("aria-label",t.l10n.summary),t.popupMenuButtons.push(t.controls.$endscreensButton)}t.editor&&(t.controls.$endscreensChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-endscreens",role:"dialog",html:'<h3 id="'+t.endscreensMenuId+'">'+t.l10n.endscreens+"</h3>"}),t.popupMenuChoosers.push(t.controls.$endscreensChooser),t.controls.$endscreensChooser.append(y("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return t.toggleEndscreensChooser()},keydown:function(e){13!==e.which&&32!==e.which||(t.toggleEndscreensChooser(),e.preventDefault())}})),t.hasStar&&(t.controls.$endscreensButton.attr("aria-haspopup","true").attr("aria-expanded","false"),t.controls.$endscreensChooser.insertAfter(t.controls.$endscreensButton).bind("transitionend",function(){t.controls.$endscreensChooser.removeClass("h5p-transitioning")})));var p='<time class="h5p-current">\n      <span class="hidden-but-read"></span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>',f=y('<div class="h5p-control h5p-simple-time">'+p+"</div>").appendTo(n);t.controls.$currentTimeSimple=f.find(".human-time"),t.controls.$currentTimeA11ySimple=f.find(".hidden-but-read");var v=i.formatTimeForA11y(0,t.l10n),m=y('<div class="h5p-control h5p-time">\n    '+p+'\n    <span aria-hidden="true"> / </span>\n    <time class="h5p-total">\n      <span class="hidden-but-read">'+t.l10n.totalTime+" "+v+'</span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>\n  </div>').appendTo(r),b=m.find(".h5p-current");t.controls.$currentTime=b.find(".human-time"),t.controls.$currentTimeA11y=b.find(".hidden-but-read"),t.controls.$totalTime=m.find(".h5p-total"),t.updateCurrentTime(0);var g=function(){t.controls.$minimalOverlay.removeClass("h5p-show"),t.controls.$more.attr("aria-expanded","false"),t.controls.$more.focus(),setTimeout(function(){t.controls.$overlayButtons.removeClass("h5p-hide")},150)};t.controls.$more=t.createButton("more","h5p-control",r,function(){"true"===t.controls.$more.attr("aria-expanded")?g():(t.controls.$minimalOverlay.addClass("h5p-show"),t.controls.$more.attr("aria-expanded","true"),t.removeSplash(),setTimeout(function(){t.controls.$minimalOverlay.find('[tabindex="0"]').focus()},150)),t.closePopupMenus()}),t.controls.$playbackRateChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-playbackRate",role:"dialog",html:'<h3 id="'+t.playbackRateMenuId+'">'+t.l10n.playbackRate+"</h3>"}),t.popupMenuChoosers.push(t.controls.$playbackRateChooser);var k=function(){t.isMinimal?t.controls.$more.click():t.controls.$playbackRateButton.click(),t.resumeVideo()};t.controls.$playbackRateChooser.append(y("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return k()},keydown:function(e){32!==e.which&&13!==e.which||(k(),e.preventDefault())}})),t.controls.$playbackRateButton=t.createButton("playbackRate","h5p-control",r,a("$playbackRateButton","$playbackRateChooser")),t.popupMenuButtons.push(t.controls.$playbackRateButton),t.setDisabled(t.controls.$playbackRateButton),t.controls.$playbackRateButton.attr("aria-haspopup","true"),t.controls.$playbackRateButton.attr("aria-expanded","false"),t.controls.$playbackRateChooser.insertAfter(t.controls.$playbackRateButton),function(){return-1!==navigator.userAgent.indexOf("Android")}()||function(){return-1!==navigator.userAgent.indexOf("iPad")}()||(t.controls.$volume=t.createButton("mute","h5p-control",r,function(){var e=t.controls.$volume;t.deactivateSound||(e.hasClass("h5p-muted")?(e.removeClass("h5p-muted").attr("aria-label",t.l10n.mute),t.video.unMute()):(e.addClass("h5p-muted").attr("aria-label",t.l10n.unmute),t.video.mute()),e.blur(),e.focus())}),t.deactivateSound&&(t.controls.$volume.addClass("h5p-muted").attr("aria-label",t.l10n.sndDisabled),t.setDisabled(t.controls.$volume))),t.deactivateSound&&t.video.mute(),t.controls.$qualityChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-quality",role:"dialog",html:'<h3 id="'+t.qualityMenuId+'">'+t.l10n.quality+"</h3>"}),t.popupMenuChoosers.push(t.controls.$qualityChooser);var w=function(){t.isMinimal?t.controls.$more.click():t.controls.$qualityButton.click(),t.resumeVideo()};t.controls.$qualityChooser.append(y("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return w()},keydown:function(e){32!==e.which&&13!==e.which||(w(),e.preventDefault())}})),t.controls.$qualityButton=t.createButton("quality","h5p-control",r,a("$qualityButton","$qualityChooser")),t.popupMenuButtons.push(t.controls.$qualityButton),t.setDisabled(t.controls.$qualityButton),t.controls.$qualityButton.attr("aria-haspopup","true"),t.controls.$qualityButton.attr("aria-expanded","false"),t.controls.$qualityChooser.insertAfter(t.controls.$qualityButton),t.editor||!1===H5P.fullscreenSupported||(t.controls.$fullscreen=t.createButton("fullscreen","h5p-control",r,function(){t.toggleFullScreen()})),t.controls.$minimalOverlay=H5P.jQuery("<div/>",{class:"h5p-minimal-overlay",appendTo:t.$container});var $=H5P.jQuery("<div/>",{role:"menu",class:"h5p-minimal-wrap",appendTo:t.controls.$minimalOverlay});t.minimalMenuKeyboardControls=new l.default([new u.default]),t.minimalMenuKeyboardControls.on("close",function(){return g()}),t.controls.$overlayButtons=H5P.jQuery([]),c&&(t.controls.$bookmarkButtonMinimal=t.createButton("bookmarks","h5p-minimal-button",$,function(){t.controls.$overlayButtons.addClass("h5p-hide"),t.toggleBookmarksChooser(!0)},!0),t.controls.$bookmarkButtonMinimal.attr("role","menuitem"),t.controls.$bookmarkButtonMinimal.attr("tabindex","-1"),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.controls.$bookmarkButtonMinimal),t.minimalMenuKeyboardControls.addElement(t.controls.$bookmarkButtonMinimal.get(0))),t.controls.$qualityButtonMinimal=t.createButton("quality","h5p-minimal-button",$,function(){t.isDisabled(t.controls.$qualityButton)||(t.controls.$overlayButtons.addClass("h5p-hide"),t.controls.$qualityButton.click())},!0),t.setDisabled(t.controls.$qualityButtonMinimal),t.controls.$qualityButtonMinimal.attr("role","menuitem"),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.controls.$qualityButtonMinimal),t.minimalMenuKeyboardControls.addElement(t.controls.$qualityButtonMinimal.get(0)),t.controls.$playbackRateButtonMinimal=t.createButton("playbackRate","h5p-minimal-button",$,function(){t.isDisabled(t.controls.$playbackRateButton)||(t.controls.$overlayButtons.addClass("h5p-hide"),t.controls.$playbackRateButton.click())},!0),t.controls.$playbackRateButtonMinimal.attr("role","menuitem"),t.setDisabled(t.controls.$playbackRateButtonMinimal),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.controls.$playbackRateButtonMinimal),t.minimalMenuKeyboardControls.addElement(t.controls.$playbackRateButtonMinimal.get(0)),t.addQualityChooser(),t.addPlaybackRateChooser(),t.interactionKeyboardControls=new l.default([new u.default]),t.controls.$interactionsContainer=y("<div/>",{role:"menu",class:"h5p-interactions-container","aria-label":t.l10n.interaction,appendTo:o}),t.controls.$bookmarksContainer=y("<div/>",{class:"h5p-bookmarks-container",appendTo:o}),t.controls.$endscreensContainer=y("<div/>",{class:"h5p-endscreens-container",appendTo:o}),t.hasPlayPromise=!1,t.hasQueuedPause=!1,t.delayed=!1,t.controls.$slider=y("<div/>",{appendTo:o}).slider({value:0,step:.01,orientation:"horizontal",range:"min",max:0,create:function(e){var n=y(e.target).find(".ui-slider-handle");n.attr("role","slider").attr("aria-valuemin","0").attr("aria-valuemax",t.getDuration().toString()).attr("aria-valuetext",i.formatTimeForA11y(0,t.l10n)).attr("aria-valuenow","0"),t.preventSkipping&&t.setDisabled(n).attr("aria-hidden","true")},start:function(){t.currentState!==i.SEEKING&&(t.toggleEndscreen(!1),t.delayedState||(t.currentState===H5P.Video.ENDED?t.lastState=H5P.Video.PLAYING:t.currentState===H5P.Video.BUFFERING&&t.lastState||(t.lastState=t.currentState)),t.delayedState=!0,clearTimeout(t.delayTimeout),t.delayTimeout=setTimeout(function(){t.delayedState=!1},200),t.hasPlayPromise?t.hasQueuedPause=!0:t.video.pause(),t.currentState=i.SEEKING,t.removeSplash(),t.$overlay.addClass("h5p-visible"))},slide:function(e,n){var o=["Right","Left","ArrowRight","ArrowLeft"],i=-1!==o.indexOf(e.key),r=!i,s=n.value;if(i){var a=t.getDuration();s=-1!==e.key.indexOf("Right")?Math.min(s+5,a):Math.max(s-5,0),t.timeUpdate(s,!0)}return t.video.seek(s),t.updateInteractions(s),t.updateCurrentTime(s),r},stop:function(e,n){t.currentState=t.lastState,t.video.seek(n.value),t.recreateCurrentInteractions();var o=t.lastState===H5P.Video.PLAYING||t.lastState===H5P.Video.VIDEO_CUED||t.hasQueuedPause;if(t.hasPlayPromise)t.hasQueuedPause=!1;else if(o){t.hasQueuedPause=!1;var i=t.video.play();t.hasQueuedPause=!1,i&&i.then?(t.hasPlayPromise=!0,i.then(function(){setTimeout(function(){(t.hasQueuedPause||t.hasActivePauseInteraction())&&t.video.pause(),t.hasPlayPromise=!1},0)})):t.hasActivePauseInteraction()&&(t.video.play(),setTimeout(function(){t.video.pause()},50))}else t.timeUpdate(n.value);t.$overlay.removeClass("h5p-visible"),t.editor&&(t.updateChooserTime(t.controls.$bookmarksChooser,".h5p-add-bookmark"),t.updateChooserTime(t.controls.$endscreensChooser,".h5p-add-endscreen"))}}),t.preventSkipping&&(t.controls.$slider.slider("disable"),t.controls.$slider.click(function(e){return t.showPreventSkippingMessage(e.offsetX),!1})),t.displayBookmarks()&&t.showBookmarksmenuOnLoad&&!1===t.video.pressToPlay&&t.toggleBookmarksChooser(!0),t.controls.$buffered=y("<div/>",{class:"h5p-buffered",prependTo:t.controls.$slider})},i.prototype.playStarAnimation=function(){var e=this;this.$starAnimation.hasClass("h5p-star-animation-inactive")&&(this.$starAnimation.removeClass("h5p-star-animation-inactive").addClass("h5p-star-animation-active"),setTimeout(function(){e.$starAnimation.removeClass("h5p-star-animation-active").addClass("h5p-star-animation-inactive")},1e3))},i.prototype.playBubbleAnimation=function(e){this.bubbleScore.setContent(e),this.bubbleScore.animate()},i.prototype.hasActivePauseInteraction=function(){var e=!1;return this.interactions.forEach(function(t){t.getElement()&&t.pause()&&(e=!0)}),e},i.prototype.createButton=function(e,t,n,o,i){var r=this,s={role:"button",tabindex:0,class:(void 0===t?"":t+" ")+"h5p-"+e,on:{click:function(){o.call(this)},keydown:function(e){13!==e.which&&32!==e.which||(o.call(this),e.preventDefault(),e.stopPropagation())}},appendTo:n};return s[i?"text":"aria-label"]=r.l10n[e],H5P.jQuery("<div/>",s)},i.prototype.addQualityChooser=function(){var e=this;if(e.qualityMenuKeyboardControls=new l.default([new u.default]),e.qualityMenuKeyboardControls.on("close",function(){return e.controls.$qualityButton.click()}),this.video.getQualities&&(e.qualities=this.video.getQualities(),e.qualities&&void 0!==this.controls.$qualityButton&&e.isDisabled(e.controls.$qualityButton))){var t=this.video.getQuality(),n=e.qualities;"YouTube"===this.video.getHandlerName()&&(n=n.filter(function(e){return e.name===t}));for(var o="",i=0;i<n.length;i++){var r=n[i],s=r.name===t;o+='<li role="menuitemradio" data-quality="'+r.name+'" aria-checked="'+s+'" aria-describedby="'+e.qualityMenuId+'">'+r.label+"</li>"}var a=y('<ul role="menu">'+o+"</ul>").appendTo(this.controls.$qualityChooser);a.children().click(function(){var t=y(this).attr("data-quality");e.updateQuality(t)}).keydown(function(t){if(32===t.which||13===t.which){var n=y(this).attr("data-quality");e.updateQuality(n)}t.stopPropagation()});a.find("li").get().forEach(function(t){e.qualityMenuKeyboardControls.addElement(t);var n="true"===t.getAttribute("aria-checked");k(t,n)}),e.removeDisabled(this.controls.$qualityButton.add(this.controls.$qualityButtonMinimal))}},i.prototype.updateQuality=function(e){var t=this;t.video.setQuality(e),"true"===t.controls.$more.attr("aria-expanded")?t.controls.$more.click():(t.controls.$qualityButton.click(),t.controls.$qualityButton.focus())},i.prototype.addPlaybackRateChooser=function(){var e=this,t=this;if(this.playbackRateMenuKeyboardControls=new l.default([new u.default]),this.playbackRateMenuKeyboardControls.on("close",function(){return t.controls.$playbackRateButton.click()}),this.video.getPlaybackRates){var n=this.video.getPlaybackRates();if(!(n.length<2)&&n&&void 0!==this.controls.$playbackRateButton&&t.isDisabled(this.controls.$playbackRateButton)){for(var o=this.video.getPlaybackRate(),i="",r=0;r<n.length;r++){var s=n[r];i+='<li role="menuitemradio" playback-rate="'+s+'" aria-checked="'+(s===o)+'" aria-describedby="'+t.playbackRateMenuId+'">'+s+"</li>"}var a=y('<ul role="menu">'+i+"</ul>").appendTo(this.controls.$playbackRateChooser);a.children().click(function(){var e=y(this).attr("playback-rate");t.updatePlaybackRate(e)}).keydown(function(e){if(32===e.which||13===e.which){var n=y(this).attr("playback-rate");t.updatePlaybackRate(n)}e.stopPropagation()}),a.find("li").get().forEach(function(t){e.playbackRateMenuKeyboardControls.addElement(t);var n="true"===t.getAttribute("aria-checked");k(t,n)}),t.removeDisabled(this.controls.$playbackRateButton.add(this.controls.$playbackRateButtonMinimal))}}},i.prototype.updatePlaybackRate=function(e){var t=this;t.video.setPlaybackRate(e),"true"===t.controls.$more.attr("aria-expanded")?t.controls.$more.click():t.controls.$playbackRateButton.click()},i.prototype.startUpdatingBufferBar=function(){var e=this;if(!e.bufferLoop){!function t(){var n=e.video.getBuffered();n&&e.controls.$buffered&&(e.controls.$buffered.css("width",n+"%"),e.hasStar&&(n>99?e.$starBar.addClass("h5p-star-bar-buffered"):e.$starBar.removeClass("h5p-star-bar-buffered"))),e.bufferLoop=setTimeout(t,500)}()}},i.prototype.resize=function(){if(this.$container){var e=this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen");this.$videoWrapper.css({marginTop:"",marginLeft:"",width:"",height:""}),this.video.trigger("resize");var t,n,o=this.justVideo?0:this.$controls.height(),i=this.$container.height();if(e){if((n=this.$videoWrapper.height())+o<=i)this.$videoWrapper.css("marginTop",(i-o-n)/2),t=this.$videoWrapper.width(),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen(!0,i,n);else{var r=this.$videoWrapper.width()/n,s=i-o;t=s*r,this.$videoWrapper.css({marginLeft:(this.$container.width()-t)/2,width:t,height:s}),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen(!0)}this.video.trigger("resize")}else t=this.$container.width(),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen();this.scaledFontSize=t>this.width?this.fontSize*(t/this.width):this.fontSize,this.$container.css("fontSize",this.scaledFontSize+"px"),this.editor||(t<this.width?this.$container.hasClass("h5p-minimal")||this.$container.addClass("h5p-minimal"):this.$container.hasClass("h5p-minimal")&&this.$container.removeClass("h5p-minimal")),this.isMinimal=this.$container.hasClass("h5p-minimal");var a=this.$videoWrapper.height();if(this.controlsCss={bottom:"",maxHeight:a+"px"},e){var l=o;n+o<=i&&(l=o+(i-o-n)/2),this.controlsCss.bottom=l+"px"}this.controls&&this.controls.$minimalOverlay&&this.controls.$minimalOverlay.css(this.controlsCss),this.$container.find(".h5p-chooser").css(this.controlsCss),this.editor?this.editor.dnb&&this.editor.dnb.dnr.setContainerEm(this.scaledFontSize):(this.resizeMobileView(),void 0!==this.$splash&&this.resizeStartScreen()),this.bubbleScore&&(this.bubbleScore.update(),this.bubbleEndscreen.update()),this.resizeInteractions()}},i.prototype.resizeMobileView=function(){if(!isNaN(this.currentState)){if(this.$container.width()/parseInt(this.$container.css("font-size"),10)<30){if(this.resizeInteractions(),!this.isMobileView){if(this.$container.addClass("mobile"),this.isMobileView=!0,this.hasUncompletedRequiredInteractions()){var e=y(".h5p-dialog",this.$container);e.show()}else this.restoreTabIndexes(),this.dnb.dialog.closeOverlay();this.recreateCurrentInteractions()}}else if(this.isMobileView){if(this.dnb&&this.dnb.dialog&&!this.hasUncompletedRequiredInteractions()){this.dnb.dialog.close(!0);var t=this.$container.find(".h5p-dialog .h5p-image img");t.css({width:"",height:""})}this.$container.removeClass("mobile"),this.isMobileView=!1,this.recreateCurrentInteractions()}}},i.prototype.resizeInteractions=function(){if(!isNaN(this.currentState)){var e=this;this.interactions.forEach(function(t){t.resizeInteraction(),t.repositionToWrapper(e.$videoWrapper),t.positionLabel(e.$videoWrapper.width())})}},i.prototype.recreateCurrentInteractions=function(){void 0!==this.dnb&&this.dnb.blurAll(),this.interactions.forEach(function(e){e.reCreateInteraction()})},i.prototype.resizeStartScreen=function(){var e=50,t=!0,n=!0;void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||(t=!1,this.startScreenOptions.hideStartTitle&&(n=!1,e=45));var o=y(".h5p-splash-description",this.$splash),i=y(".h5p-splash-title",this.$splash),r=o.clone().css("position","absolute").addClass("minimum-font-size").appendTo(o.parent()),s=i.clone().css("position","absolute").addClass("minimum-font-size").appendTo(i.parent()),a=parseInt(r.css("font-size"),10),l=parseInt(s.css("font-size"),10),c=this.$container.width(),u=parseInt(c/e,10);t||(n&&u<a?u=a:u<10&&(u=10)),c<510?this.$splash.addClass("mobile"):this.$splash.removeClass("mobile"),.8*u<a?o.addClass("minimum-font-size"):o.removeClass("minimum-font-size"),1.5*u<l?i.addClass("minimum-font-size"):i.removeClass("minimum-font-size"),this.$splash.css("font-size",u),r.remove(),s.remove()},i.prototype.toggleFullScreen=function(){var e=this;H5P.isFullscreen||this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen")?void 0!==H5P.exitFullScreen&&void 0!==H5P.fullScreenBrowserPrefix?H5P.exitFullScreen():(void 0===H5P.fullScreenBrowserPrefix?y(".h5p-disable-fullscreen").click():""===H5P.fullScreenBrowserPrefix?window.top.document.exitFullScreen():"ms"===H5P.fullScreenBrowserPrefix?window.top.document.msExitFullscreen():window.top.document[H5P.fullScreenBrowserPrefix+"CancelFullScreen"](),e.trigger("exitFullScreen")):(H5P.fullScreen(this.$container,this),void 0===H5P.exitFullScreen&&e.trigger("enterFullScreen")),this.resizeInteractions()},i.prototype.timeUpdate=function(e,t){var n=this;if(e>=0)try{var o=n.controls.$slider.find(".ui-slider-handle"),r=i.formatTimeForA11y(e,n.l10n);n.controls.$slider.slider("option","value",e),o.attr("aria-valuetext",r),o.attr("aria-valuenow",e.toString())}catch(e){return}n.updateInteractions(e),t||setTimeout(function(){(n.currentState===H5P.Video.PLAYING||n.currentState===H5P.Video.BUFFERING&&n.lastState===H5P.Video.PLAYING)&&n.timeUpdate(n.video.getCurrentTime())},40)},i.prototype.updateInteractions=function(e){var t=this,n=Math.floor(10*e)/10;if(n!==t.lastTenth){void 0!==t.bookmarksMap&&void 0!==t.bookmarksMap[n]&&t.bookmarksMap[n].mouseover().mouseout();(function(){return void 0!==t.endscreensMap&&void 0!==t.endscreensMap[n]&&t.currentState!==i.SEEKING})()&&t.getAnsweredTotal()>0&&t.toggleEndscreen(!0)}t.lastTenth=n;var o=Math.floor(e);o!==t.lastSecond&&(t.toggleInteractions(o),t.currentState!==H5P.Video.PLAYING&&t.currentState!==H5P.Video.PAUSED||t.updateCurrentTime(o)),t.lastSecond=o},i.prototype.updateCurrentTime=function(e){var t=this;e=Math.max(e,0);var n=i.humanizeTime(e),o=i.formatTimeForA11y(e,t.l10n);t.controls.$currentTime.html(n),t.controls.$currentTimeA11y.html(t.l10n.currentTime+" "+o),t.controls.$currentTimeSimple.html(n),t.controls.$currentTimeA11ySimple.html(t.l10n.currentTime+" "+o)},i.prototype.getUsersScore=function(){for(var e=0,t=0;t<this.interactions.length;t++)this.interactions[t].score&&(e+=this.interactions[t].score);return e},i.prototype.getUsersMaxScore=function(){for(var e=0,t=0;t<this.interactions.length;t++)this.interactions[t].maxScore&&(e+=this.interactions[t].maxScore);return e},i.prototype.getScore=function(){return this.getUsersScore()},i.prototype.getMaxScore=function(){return this.getUsersMaxScore()},i.prototype.showOverlayMask=function(){var e=this;e.$videoWrapper.addClass("h5p-disable-opt-out"),e.disableTabIndexes(),e.dnb.dialog.openOverlay(),e.restorePosterTabIndexes(),e.$container.find(".h5p-dialog-wrapper").click(function(){e.hasUncompletedRequiredInteractions()&&e.showWarningMask()}),e.toggleFocusTrap()},i.prototype.restorePosterTabIndexes=function(){var e=this;e.$overlay.find(".h5p-interaction.h5p-poster").each(function(){e.restoreTabIndexes(y(this))})},i.prototype.disableTabIndexes=function(){var e=this,t=e.$container.find(".h5p-dialog-wrapper");e.$tabbables=e.$container.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){var e=y(this),n=y.contains(t.get(0),e.get(0));if(e.data("tabindex"))return!0;if(!n){var o=e.attr("tabindex");return e.data("tabindex",o),e.attr("tabindex","-1"),!0}return!1})},i.prototype.restoreTabIndexes=function(e){var t=this;t.$tabbables&&(t.$tabbables.each(function(){var t=y(this),n=t.data("tabindex");if(e&&!y.contains(e.get(0),t.get(0)))return!0;t.hasClass("ui-slider-handle")?(t.attr("tabindex",0),t.removeData("tabindex")):void 0!==n?(t.attr("tabindex",n),t.removeData("tabindex")):t.removeAttr("tabindex")}),e||(t.$tabbables=void 0))},i.prototype.toggleFocusTrap=function(){var e=this,t=this.getVisibleInteractions().filter(function(e){return e.getRequiresCompletion()&&!e.hasFullScore()});t.length>0?this.$container.off("focusin").on("focusin",function(n){return e.trapFocusInInteractions(t,y(n.target))}):this.$container.off("focusin","**")},i.prototype.trapFocusInInteractions=function(e,t){var n=e.some(function(e){var n=e.getElement();return P(n,t)}),o=!!this.$mask&&P(this.$mask,t);if(!n&&!o){var i=e[0].getElement();i&&i.focus()}},i.prototype.hideOverlayMask=function(){var e=this;return e.restoreTabIndexes(),e.dnb.dialog.closeOverlay(),e.$videoWrapper.removeClass("h5p-disable-opt-out"),e.toggleFocusTrap(),e.$container.find(".h5p-dialog-wrapper")},i.prototype.showWarningMask=function(){var e=this,t="interactive-video-"+e.contentId+"-"+e.instanceIndex+"-completion-warning-text";return e.$mask||(e.$mask=y('<div class="h5p-warning-mask" role="alertdialog" aria-describedby="'+t+'">\n        <div class="h5p-warning-mask-wrapper">\n          <div id="'+t+'" class="h5p-warning-mask-content">'+e.l10n.requiresCompletionWarning+'</div>\n          <button type="button" class="h5p-joubelui-button h5p-button-back">'+e.l10n.back+"</button>\n        </div>\n      </div>").click(function(){e.$mask.hide()}).appendTo(e.$container)),e.$mask.show(),e.$mask.find(".h5p-button-back").focus(),e.$mask},i.prototype.setDisabled=function(e){return e.attr("aria-disabled","true").attr("tabindex","-1")},i.prototype.isDisabled=function(e){return"true"===e.attr("aria-disabled")},i.prototype.removeDisabled=function(e){return e.removeAttr("aria-disabled").attr("tabindex","0")},i.prototype.hasUncompletedRequiredInteractions=function(e){var t=this;return(void 0!==e?t.getVisibleInteractionsAt(e):t.getVisibleInteractions()).some(function(e){return e.getRequiresCompletion()&&!e.hasFullScore()})},i.prototype.getVisibleInteractions=function(){return this.interactions.filter(function(e){return e.isVisible()})},i.prototype.getVisibleInteractionsAt=function(e){return this.interactions.filter(function(t){return t.visibleAt(e)})},i.prototype.showSolutions=function(){},i.prototype.getTitle=function(){return H5P.createTitle(this.contentData&&this.contentData.metadata&&this.contentData.metadata.title?this.contentData.metadata.title:"Interactive Video")},i.prototype.toggleInteractions=function(e){for(var t=0;t<this.interactions.length;t++)this.interactions[t].toggle(e),this.interactions[t].repositionToWrapper(this.$videoWrapper);this.accessibility.announceInteractions(this.interactions)},i.prototype.play=function(){this.video.play()},i.prototype.seek=function(e){this.video.seek(e)},i.prototype.pause=function(){this.video&&this.video.pause&&this.video.pause()},i.prototype.resetTask=function(){if(void 0!==this.controls){this.seek(0),this.timeUpdate(-1),this.controls.$slider.slider("option","value",0);for(var e=0;e<this.interactions.length;e++)this.interactions[e].resetTask()}},i.prototype.read=function(e){var t=this;t.$read&&(t.readText?t.readText+=("."===t.readText.substr(-1,1)?" ":". ")+e:t.readText=e,t.$read.html(t.readText),setTimeout(function(){t.readText=null,t.$read.html("")},100))},i.prototype.getCopyrights=function(){var e=this,t=new H5P.ContentCopyrights;void 0!==e.options.video.files&&void 0!==e.options.video.files[0]&&t.addMedia(new H5P.MediaCopyright(e.options.video.files[0].copyright,e.l10n)),void 0!==e.options.video.startScreenOptions.copyright&&t.addMedia(e.options.video.startScreenOptions.copyright);var n=e.options.video.startScreenOptions.poster;if(n&&void 0!==n.copyright){var o=new H5P.MediaCopyright(n.copyright,e.l10n),i=H5P.getPath(n.path,e.contentId);o.setThumbnail(new H5P.Thumbnail(i,n.width,n.height)),t.addMedia(o)}for(var r=0;r<e.interactions.length;r++){var s=e.interactions[r].getCopyrights();s&&t.addContent(s)}if(e.hasMainSummary()){var a=H5P.newRunnable(e.options.summary.task,e.contentId);if(void 0!==a){var l=new H5P.ContentCopyrights;l.addContent(H5P.getCopyrights(a,{action:e.options.summary.task},e.contentId)),l.setLabel(e.l10n.summary),t.addContent(l)}}return t},i.prototype.skippingPrevented=function(){return this.preventSkipping},i.SEEKING=4,i.LOADED=5,i.ATTACHED=6,i.humanizeTime=function(e){var t=i.secondsToMinutesAndHours(e),n="";return 0!==t.hours&&(n+=t.hours+":",t.minutes<10&&(n+="0")),n+=t.minutes+":",t.seconds<10&&(n+="0"),n+=t.seconds},i.formatTimeForA11y=function(e,t){var n=i.secondsToMinutesAndHours(e);return(n.hours>0?n.hours+" "+t.hours+", ":"")+n.minutes+" "+t.minutes+", "+n.seconds+" "+t.seconds},i.secondsToMinutesAndHours=function(e){var t=Math.floor(e/60);return{seconds:Math.floor(e%60),minutes:t%60,hours:Math.floor(t/60)}};var k=function(e,t){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")},w=function(e,t){for(var n=0;n<t.length;n++)if(t[n].name===e)return t[n]},$=function(e,t){null===e?t():setTimeout(t,e)},S=function(){return void 0===window.interactiveVideoCounter&&(window.interactiveVideoCounter=0),window.interactiveVideoCounter++};i.prototype.getXAPIData=function(){var e=this,t=this.createXAPIEventTemplate("answered");C(t),t.setScoredResult(e.getScore(),e.getMaxScore(),e,!0,e.getScore()===e.getMaxScore());var n=x(e.interactions);return{statement:t.data.statement,children:n}};var C=function(e){var t=e.getVerifiedStatementValue(["object","definition"]);H5P.jQuery.extend(t,T())},T=function(){var e={};return e.interactionType="compound",e.type="http://adlnet.gov/expapi/activities/cmi.interaction",e.description={"en-US":""},e},P=function(e,t){return void 0!==e&&void 0!==t&&(e.is(t)||y.contains(e.get(0),t.get(0)))},x=function(e){return e.map(function(e){return e.getXAPIData()}).filter(function(e){return!!e})};t.default=i;t.KEY_CODE_START_PAUSE=75},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(10),a=n(2),l=n(11),c=(0,s.removeAttribute)("tabindex"),u=((0,a.forEach)(c),(0,s.setAttribute)("tabindex","0")),d=(0,s.setAttribute)("tabindex","-1"),h=(0,s.hasAttribute)("tabindex"),p=function(){function e(t){o(this,e),i(this,(0,l.Eventful)()),this.plugins=t||[],this.elements=[],this.negativeTabIndexAllowed=!1,this.on("nextElement",this.nextElement,this),this.on("previousElement",this.previousElement,this),this.initPlugins()}return r(e,[{key:"addElement",value:function(e){this.elements.push(e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}},{key:"insertElementAt",value:function(e,t){this.elements.splice(t,0,e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}},{key:"removeElement",value:function(e){this.elements=(0,a.without)([e],this.elements),h(e)&&(this.setUntabbable(e),this.elements[0]&&this.setTabbable(this.elements[0])),this.firesEvent("removeElement",e)}},{key:"count",value:function(){return this.elements.length}},{key:"firesEvent",value:function(e,t){var n=this.elements.indexOf(t);return this.fire(e,{element:t,index:n,elements:this.elements,oldElement:this.tabbableElement})}},{key:"nextElement",value:function(e){var t=e.index,n=t===this.elements.length-1,o=this.elements[n?0:t+1];this.setTabbable(o),o.focus()}},{key:"setTabbable",value:function(e){(0,a.forEach)(this.setUntabbable.bind(this),this.elements),u(e),this.tabbableElement=e}},{key:"setUntabbable",value:function(e){this.negativeTabIndexAllowed?d(e):c(e)}},{key:"previousElement",value:function(e){var t=e.index,n=0===t,o=this.elements[n?this.elements.length-1:t-1];this.setTabbable(o),o.focus()}},{key:"useNegativeTabIndex",value:function(){this.negativeTabIndexAllowed=!0,this.elements.forEach(function(e){e.hasAttribute("tabindex")||d(e)})}},{key:"initPlugins",value:function(){this.plugins.forEach(function(e){void 0!==e.init&&e.init(this)},this)}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=t.curry=function(e){var t=e.length;return function n(){var o=Array.prototype.slice.call(arguments,0);return o.length>=t?e.apply(null,o):function(){var e=Array.prototype.slice.call(arguments,0);return n.apply(null,o.concat(e))}}},i=(t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})},t.forEach=o(function(e,t){t.forEach(e)}),t.map=o(function(e,t){return t.map(e)}),t.filter=o(function(e,t){return t.filter(e)})),r=(t.some=o(function(e,t){return t.some(e)}),t.contains=o(function(e,t){return-1!=t.indexOf(e)}));t.without=o(function(e,t){return i(function(t){return!r(t,e)},t)}),t.inverseBooleanString=function(e){return("true"!==e).toString()}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.selectability=!0}return i(e,[{key:"init",value:function(e){this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.controls=e,this.controls.on("addElement",this.listenForKeyDown,this),this.controls.on("removeElement",this.removeKeyDownListener,this)}},{key:"listenForKeyDown",value:function(e){e.element.addEventListener("keydown",this.boundHandleKeyDown)}},{key:"removeKeyDownListener",value:function(e){e.element.removeEventListener("keydown",this.boundHandleKeyDown)}},{key:"handleKeyDown",value:function(e){switch(e.which){case 27:this.close(e.target),e.preventDefault(),e.stopPropagation();break;case 13:case 32:this.select(e.target),e.preventDefault(),e.stopPropagation();break;case 37:case 38:this.hasChromevoxModifiers(e)||(this.previousElement(e.target),e.preventDefault(),e.stopPropagation());break;case 39:case 40:this.hasChromevoxModifiers(e)||(this.nextElement(e.target),e.preventDefault(),e.stopPropagation())}}},{key:"hasChromevoxModifiers",value:function(e){return e.shiftKey||e.ctrlKey}},{key:"previousElement",value:function(e){this.controls.firesEvent("previousElement",e)}},{key:"nextElement",value:function(e){this.controls.firesEvent("nextElement",e)}},{key:"select",value:function(e){this.selectability&&!1!==this.controls.firesEvent("before-select",e)&&(this.controls.firesEvent("select",e),this.controls.firesEvent("after-select",e))}},{key:"disableSelectability",value:function(){this.selectability=!1}},{key:"enableSelectability",value:function(){this.selectability=!0}},{key:"close",value:function(e){!1!==this.controls.firesEvent("before-close",e)&&(this.controls.firesEvent("close",e),this.controls.firesEvent("after-close",e))}}]),e}();t.default=r},function(e,t,n){"use strict";n(5),n(6),n(7),n(8);var o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o);H5P=H5P||{},H5P.InteractiveVideo=i.default},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=o(i),s=n(3),a=o(s),l={ICON:0,TEXT:1},c=function(e,t,n,o,i,s){var c=this,h="interactive-video-"+s+"-menu-"+e,p=new r.default([new a.default]);p.on("close",function(){return b()});var f=[];H5P.EventDispatcher.call(c);var v,m=function(){c.control.setAttribute("aria-expanded","true"),c.popup.classList.add("h5p-show"),c.trigger("open"),c.popup.querySelector('li[tabindex="0"]').focus()},b=function(){c.control.setAttribute("aria-expanded","false"),c.control.focus(),c.popup.classList.remove("h5p-show"),c.trigger("close")},g=function(){"true"===c.control.getAttribute("aria-expanded")?b():m()},y=function(e,t,n){for(var o=0;o<e.length;o++)t.call(n,e[o],o)},k=function(e,t){n=t;var o=v.querySelectorAll('[aria-checked="true"]');y(o,function(e){return e.setAttribute("aria-checked","false")},this),e.setAttribute("aria-checked","true"),b(),c.trigger("select",t)},w=function(e){var t=e.value===n.value,i=d(null,l.TEXT,e.label,function(){k(this,e)},"li",o);return f.push({option:e,element:i}),i.setAttribute("aria-checked",t.toString()),i.setAttribute("aria-describedby",h),p.addElement(i),t?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex"),i};c.updateOptions=function(e){v&&v.parentNode.removeChild(v),v=u(null,null,"ol"),v.setAttribute("role","menu");for(var t=0;t<e.length;t++)v.appendChild(w(e[t]));c.popup.appendChild(v)},c.popup=u("h5p-chooser h5p-"+e,'<h3 id="'+h+'">'+i[e]+"</h3>"),c.popup.setAttribute("role","dialog");var $=d("h5p-chooser-close-button",l.ICON,i.close,g,"div","button");c.popup.appendChild($),c.control=d("h5p-control h5p-"+e,l.ICON,i[e],g,"div","button"),c.control.setAttribute("aria-haspopup","true"),c.overlayControl=d("h5p-minimal-button h5p-"+e,l.TEXT,i[e],g,"div","menuitem"),c.overlayControl.tabIndex="-1",c.overlayControl.classList.add("h5p-hide"),c.updateOptions(t)};c.prototype=Object.create(H5P.EventDispatcher.prototype),c.prototype.constructor=c;var u=function(e,t,n){var o=document.createElement(n||"div");return e&&(o.className=e),t&&(o.innerHTML=t),o},d=function(e,t,n,o,i,r){var s=u(e,t===l.TEXT?n:"",i);return s.tabIndex=0,s.setAttribute("role",r),t===l.ICON&&(s.title=n),s.addEventListener("click",function(e){o.call(s,e)},!1),s.addEventListener("keydown",function(e){32!==e.which&&13!==e.which||(e.preventDefault(),o.call(s,e))},!1),s};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=t.toggleClass=t.toggleVisibility=t.show=t.hide=t.removeClass=t.addClass=t.classListContains=t.removeChild=t.querySelectorAll=t.nodeListToArray=t.querySelector=t.appendChild=t.toggleAttribute=t.attributeEquals=t.hasAttribute=t.removeAttribute=t.setAttribute=t.getAttribute=void 0;var o=n(2),i=t.getAttribute=(0,o.curry)(function(e,t){return t.getAttribute(e)}),r=t.setAttribute=(0,o.curry)(function(e,t,n){return n.setAttribute(e,t)}),s=(t.removeAttribute=(0,o.curry)(function(e,t){return t.removeAttribute(e)}),t.hasAttribute=(0,o.curry)(function(e,t){return t.hasAttribute(e)}),t.attributeEquals=(0,o.curry)(function(e,t,n){return n.getAttribute(e)===t}),t.toggleAttribute=(0,o.curry)(function(e,t){var n=i(e,t);r(e,(0,o.inverseBooleanString)(n),t)}),t.appendChild=(0,o.curry)(function(e,t){return e.appendChild(t)}),t.querySelector=(0,o.curry)(function(e,t){return t.querySelector(e)}),t.nodeListToArray=function(e){return Array.prototype.slice.call(e)}),a=(t.querySelectorAll=(0,o.curry)(function(e,t){return s(t.querySelectorAll(e))}),t.removeChild=(0,o.curry)(function(e,t){return e.removeChild(t)}),t.classListContains=(0,o.curry)(function(e,t){return t.classList.contains(e)}),t.addClass=(0,o.curry)(function(e,t){return t.classList.add(e)})),l=t.removeClass=(0,o.curry)(function(e,t){return t.classList.remove(e)}),c=t.hide=a("hidden"),u=t.show=l("hidden");t.toggleVisibility=(0,o.curry)(function(e,t){return(e?u:c)(t)}),t.toggleClass=(0,o.curry)(function(e,t,n){n.classList[t?"add":"remove"](e)}),t.createElement=function(e){var t=e.tag,n=e.id,o=e.classes,i=e.attributes,r=document.createElement(t);return n&&(r.id=n),o&&o.forEach(function(e){r.classList.add(e)}),i&&Object.keys(i).forEach(function(e){r.setAttribute(e,i[e])}),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Eventful=function(){return{listeners:{},on:function(e,t,n){var o={listener:t,scope:n};return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(o),this},fire:function(e,t){return(this.listeners[e]||[]).every(function(e){return!1!==e.listener.call(e.scope||this,t)})},propagate:function(e,t){var n=this;e.forEach(function(e){return t.on(e,function(t){return n.fire(e,t)})})}}}},function(e,t,n){"use strict";function o(e,t,n){var o=this;H5P.EventDispatcher.call(o);var p,v,m,b,g=e.action;n&&(g.userDatas={state:n});var y,k,w,$,S=g.library.split(" ")[0],C=t.l10n[h(S,e)?"content":"interaction"],T="H5P.Nil"!==S&&"button"===e.displayType,P=[g.params.contentName,T?l(e.label):"",e.libraryTitle].filter(a)[0],x=!1,E=!1,I=!1,A=e.action.metadata;this.on("open-dialog",function(){N()}),this.on("show-mask",function(){j(this.getElement())});var B=function(){return s.extend({},{backgroundColor:"rgb(255,255,255)",boxShadow:!0},e.visuals)},M=function(n){p=s("<div/>",{tabindex:0,role:"button",class:"h5p-interaction "+y+(n?"":" h5p-hidden"),"aria-popup":"true","aria-expanded":"false","aria-label":P,css:{left:e.x+"%",top:e.y+"%",width:"",height:""},on:{click:function(){o.dialogDisabled||(N(),p.attr("aria-expanded","true"))},keydown:function(e){13!==e.which&&32!==e.which||o.dialogDisabled||(N(),p.attr("aria-expanded","true"),e.preventDefault())}}}),p.on("keyup",O),o.getRequiresCompletion()&&void 0===t.editor&&t.currentState!==H5P.InteractiveVideo.SEEKING&&N(!0),s("<div/>",{class:"h5p-touch-area"}).appendTo(p),s("<div/>",{class:"h5p-interaction-button"}).appendTo(p),t.editor&&p.hover(function(){p.is(".focused")||p.is(":focus")||t.dnb&&(!t.dnb||t.dnb.newElement)?(t.editor.hideInteractionTitle(),x=!1):(t.editor.showInteractionTitle(P,p),x=!0)},function(){t.editor.hideInteractionTitle(),x=!1}).focus(function(){t.editor.hideInteractionTitle(),x=!1}).click(function(){t.editor.hideInteractionTitle()});var i=a(l(e.label));e.label&&i&&(v=H(e.label,"h5p-interaction").appendTo(p)),o.trigger("display",p),setTimeout(function(){p&&p.removeClass("h5p-hidden")},0)},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s("<div/>",{class:"h5p-interaction-label "+t,html:'<div class="h5p-interaction-label-text">'+e+"</div>"})},D=function(){return p=H(e.label,"h5p-interaction h5p-interaction-label-standalone"),p.css({left:e.x+"%",top:e.y+"%",width:"",height:"initial"}),o.trigger("display",p),setTimeout(function(){p&&p.removeClass("h5p-hidden")},0),p},O=function(e){e.which===r.KEY_CODE_START_PAUSE&&e.stopPropagation()},R=function(t){if("timecode"===e.goto.type)t.click(function(t){1===t.which&&W({data:e.goto.time})}).keypress(function(t){32===t.which&&W({data:e.goto.time})}).attr("href","#").attr("tabindex","0");else{var n=e.goto.url;t.keypress(function(e){32===e.which&&this.click()}).attr({href:("other"!==n.protocol?n.protocol:"")+n.url,target:"_blank"})}return t.addClass("goto-clickable")},V=function(e){var n=!t.hasUncompletedRequiredInteractions(e);k&&k.trigger("hide"),p&&o.trigger("hide",p),o.isButton()?n&&t.dnb.dialog.close():(t.isMobileView&&n&&t.dnb.dialog.close(),p&&p.detach()),o.trigger("remove",p),n&&U(p)},q=function(){var e=document.createElement("button");return e.innerHTML=t.l10n.continueWithVideo,e.className="h5p-interaction-continue-button",e.addEventListener("click",function(){V(),t.play()}),e},L=function(e){if("H5P.Questionnaire"===S){if(e.find(".h5p-interaction-continue-button").length)return;var n=q(),o=e.find(".h5p-questionnaire-success-center");o.length&&o.get(0).appendChild(n),k.on("noSuccessScreen",function(){V(),t.play()})}"H5P.FreeTextQuestion"===S&&k.on("continue",function(){V(),t.play()})},z=function(e,t){var n=function(e){return t.target===e.get(0)},o=9===t.which,i=e.first(),r=e.last();o&&t.shiftKey&&n(i)?(r.focus(),t.preventDefault()):o&&n(r)&&(i.focus(),t.preventDefault())},N=function(n){var i=t.$container.find(".h5p-dialog-wrapper");"function"==typeof k.setActivityStarted&&"function"==typeof k.getScore&&k.setActivityStarted();var r=o.isGotoClickable(),a=i.find("[tabindex]"),l=s(r?"<a>":"<div>",{class:"h5p-dialog-interaction h5p-frame"});!r&&f(S)&&l.attr("tabindex","0"),l.on("keyup",O),void 0!==t.editor?l.attr("tabindex",-1):0===a.length&&l.attr("tabindex",0),o.getRequiresCompletion()&&i.keydown(function(e){var t=i.find('[tabindex="0"], button, input').filter(":visible");z(t,e)});var d=r?R(l):l;if(k.attach(d),L(d),J(k)&&(o.score=k.getScore(),o.maxScore=k.getMaxScore()),o.hasFullScore()&&n){if(i.hasClass("h5p-hidden"))return}else o.getRequiresCompletion()&&!o.hasFullScore()&&(t.dnb.dialog.hideCloseButton(),t.dnb.dialog.disableOverlay=!0,i.click(function(){if(!o.hasFullScore()){t.showWarningMask().find(".h5p-button-back").click(function(){return l.find("button").last().focus()})}}));t.dnb.dialog.open(l),t.disableTabIndexes(),t.dnb.dialog.addLibraryClass(S),t.dnb.dialog.toggleClass("goto-clickable-visualize",!(!r||!e.goto.visualize)),t.dnb.dialog.toggleClass("h5p-goto-timecode",u(e,c.TIME_CODE)),t.dnb.dialog.disableOverlay&&t.restorePosterTabIndexes();var h=function(){t.dnb.$dialogContainer.one("transitionend",function(){if(l.is(".h5p-image")){l.find("img").css({width:"",height:""})}});try{void 0!==k.pause&&(k.pause instanceof Function||"function"==typeof k.pause)&&k.pause()}catch(e){H5P.error(e)}p&&(p.focus(),p.attr("aria-expanded","false")),k&&k.trigger("hide")};t.dnb.dialog.once("close",h);var v=function e(){o.dialogWidth=t.dnb.dialog.getDialogWidth(),t.dnb.dialog.off("close",e)};if(t.dnb.dialog.on("close",v),"H5P.Image"===S){var m=t.dnb.dialog.getMaxSize(p),b=l.find("img");g.params.file.width&&g.params.file.height?F(b,m,{width:g.params.file.width,height:g.params.file.height},!t.isMobileView):(b.load(function(){b.is(":visible")&&F(b,m,{width:this.width,height:this.height},!t.isMobileView)}),t.dnb.dialog.position(p))}else t.isMobileView||("H5P.FreeTextQuestion"===S?t.dnb.dialog.position(p,{width:o.dialogWidth/16},"big"):"H5P.Text"!==S&&"H5P.Table"!==S?t.dnb.dialog.position(p,{width:o.dialogWidth/16},"medium"):t.dnb.dialog.position(p,{width:o.dialogWidth/16},null));if("H5P.Summary"===S){var y=0;H5P.on(k,"resize",function(){var e=l.height();(y>e+10||y<e-10)&&setTimeout(function(){t.dnb.dialog.scroll(e,300)},500),y=e})}setTimeout(function(){H5P.trigger(k,"resize")},0)},F=function(e,n,o,i){o.width/=16,o.height/=16,o.height>n.height&&(o.width=o.width*n.height/o.height,o.height=n.height),o.width>n.width&&(o.height=o.height*n.width/o.width,o.width=n.width);var r=16/Number(e.css("fontSize").replace("px",""));e.css({width:o.width*r+"em",height:o.height*r+"em"}),i&&t.dnb.dialog.position(p,o)},W=function(n){o.isButton()&&t.dnb.dialog.close(),t.currentState!==H5P.Video.PAUSED&&t.currentState!==H5P.Video.ENDED||t.play();var i=n.data;i===e.duration.from&&(i+=.2),t.seek(i)},_=function(){var n=e.height||10,o=e.width||10,i=t.width/t.fontSize;return{height:n/(i/(t.$videoWrapper.width()/t.$videoWrapper.height()))*100+"%",width:o/i*100+"%"}},j=function(e){e.css("zIndex",52),t.showOverlayMask()},U=function(e){e&&e.css("zIndex",""),t.hideOverlayMask()},K=function(){var n=o.isGotoClickable(),i=_(),r=B();if(p=s("<div/>",{"aria-label":t.l10n.interaction,tabindex:"-1",class:"h5p-interaction h5p-poster "+y+(n&&e.goto.visualize?" goto-clickable-visualize":""),css:{left:e.x+"%",top:e.y+"%",width:i.width,height:i.height}}),p.on("keyup",O),"H5P.IVHotspot"!==S){p.css("background",r.backgroundColor);var a=r.backgroundColor.split(",");if(a[3]){0===parseFloat(a[3].replace(")",""))&&p.addClass("h5p-transparent-interaction")}}!1===r.boxShadow&&p.addClass("h5p-box-shadow-disabled"),"H5P.Link"===S&&(p.css("height","auto"),p.css("width","auto"),void 0===t.editor&&p.click(function(){return window.open(k.getUrl()),t.pause(),!1})),b=s("<div>",{class:"h5p-interaction-outer"}).appendTo(p),m=s(n?"<a>":"<div>",{class:"h5p-interaction-inner h5p-frame"}).appendTo(b),!n&&f(S)&&m.attr("tabindex","0"),void 0!==t.editor&&k.disableAutoPlay&&k.disableAutoPlay();var l=n?R(m):m;k.attach(l),L(l),o.trigger("display",p),o.getRequiresCompletion()&&t.currentState!==H5P.InteractiveVideo.SEEKING&&void 0===t.editor&&!o.hasFullScore()&&(j(p),p.focus()),setTimeout(function(){H5P.trigger(k,"resize")},0),"function"==typeof k.setActivityStarted&&"function"==typeof k.getScore&&k.setActivityStarted()},Q=function(){var n,i,r=!0;if(e.adaptivity&&(i=o.hasFullScore(),r=!o.getRequiresCompletion()||i,i?n=e.adaptivity.correct:i||(n=e.adaptivity.wrong)),!n||void 0===n.seekTo)return void(void 0!==k.hasButton&&(k.hasButton("iv-continue")||k.addButton("iv-continue",t.l10n.defaultAdaptivitySeekLabel,function(){V(),G()}),k[r?"showButton":"hideButton"]("iv-continue")));t.pause(),!n.allowOptOut&&p&&(o.isButton()?(t.dnb.dialog.disableOverlay=!0,t.dnb.dialog.hideCloseButton()):j(p));var s=i?"correct":"wrong",a=n.seekLabel?n.seekLabel:t.l10n.defaultAdaptivitySeekLabel;k.hideButton("iv-continue").addButton("iv-adaptivity-"+s,a,function(){V(n.seekTo),!i&&k.resetTask&&(k.resetTask(),k.hideButton("iv-adaptivity-"+s)),o.remove(),G(n.seekTo)}).showButton("iv-adaptivity-"+s,1).hideButton("iv-adaptivity-"+(i?"wrong":"correct"),1).hideButton("check-answer",1).hideButton("show-solution",1).hideButton("try-again",1),void 0!==k.disableInput&&(k.disableInput instanceof Function||"function"==typeof k.disableInput)&&k.disableInput(),setTimeout(function(){var e=n.message.replace("<p>","").replace("</p>","");k.updateFeedbackContent(e,!0),k.read(e)},0)},G=function(e){var n=Y(),o=n.filter(function(e){return!e.isButton()});if(o.length?n=o:n.length&&t.$container.find(".h5p-dialog-wrapper .h5p-dialog").show(),n.length){var i=n[0];return i.isButton()?i.trigger("open-dialog"):i.trigger("show-mask"),void t.pause()}t.currentState!==H5P.Video.ENDED&&(void 0!==e&&(t.pause(),t.seek(e)),t.play(),t.controls.$play.focus())},Y=function(){return t.getVisibleInteractions().filter(function(e){return e!==o}).filter(function(e){return e.getRequiresCompletion()&&!e.hasFullScore()})},X=function(){var t=e.className;if(void 0===t){var n=g.library.split(" ")[0].toLowerCase().split(".");t=n[0]+"-"+n[1]+"-interaction"}return e.goto&&"timecode"===e.goto.type&&(t+=" h5p-goto-timecode"),t};o.isGotoClickable=function(){return-1!==["H5P.Text","H5P.Image"].indexOf(S)&&e.goto&&-1!==["timecode","url"].indexOf(e.goto.type)},o.getCurrentState=function(){if(k&&(k.getCurrentState instanceof Function||"function"==typeof k.getCurrentState))return k.getCurrentState()},o.getDuration=function(){return{from:e.duration.from,to:e.duration.to}},o.getRequiresCompletion=function(){return!!e.adaptivity&&!!e.adaptivity.requireCompletion},o.pause=function(){return e.pause},o.isButton=function(){return"button"===e.displayType||!(!t.isMobileView||"H5P.IVHotspot"===S)&&("H5P.Image"!==S||!1!==e.buttonOnMobile)},o.isStandaloneLabel=function(){return"H5P.Nil"===S},o.isMainSummary=function(){return!0===e.mainSummary},o.selectDot=function(){t.preventSkipping||(t.seekingTo=!0,Math.floor(10*t.video.getCurrentTime())!==Math.floor(10*e.duration.from)&&(t.currentState===H5P.Video.VIDEO_CUED?(t.play(),t.seek(e.duration.from)):t.currentState===H5P.Video.PLAYING?t.seek(e.duration.from):(t.play(),t.seek(e.duration.from),t.pause())))},o.addDot=function(){if("H5P.Nil"===S)return s("<div/>",{class:n});var n="h5p-seekbar-interaction "+y,i=s("<div/>",{role:"menuitem",class:n,"aria-label":C+". "+P,title:P,css:{left:e.duration.from*t.oneSecondInPercentage+"%"},on:{click:o.selectDot,keydown:function(e){if(13===e.which||32===e.which)return o.selectDot(),!1}}});return t.preventSkipping&&i.attr("aria-disabled","true").attr("tabindex","-1"),o.$menuitem=i,i},o.isVisible=function(){return I},o.visibleAt=function(t){return!(t<e.duration.from||t>e.duration.to)},o.toggle=function(n,i){return n=Math.floor(n),o.visibleAt(n)?p?void 0:(I=!0,o.isStandaloneLabel()?D():o.isButton()?M(i):K(),void 0===t.editor?$=t.dnb.add(p,void 0,{dnbElement:$,disableContextMenu:!0}):(o.fit&&(t.editor.fit(p,e),o.fit=!1),p.focus(function(){t.pause()})),p):(I=!1,void(p&&($&&($.hideContextMenu(),$===t.dnb.focusedElement&&($.blur(),delete t.dnb.focusedElement)),t.editor&&x&&(t.editor.hideInteractionTitle(),x=!1),o.remove())))},o.setTitle=function(e){p&&p.attr("aria-label",e),P=e},o.reCreateInteraction=function(){"H5P.IVHotspot"!==S&&p&&(k&&k.trigger("hide"),o.trigger("hide",p),p.detach(),o.isStandaloneLabel()?D():o.isButton()?M(!0):K())},o.resizeInteraction=function(){o.isStandaloneLabel()||H5P.trigger(k,"resize")},o.positionLabel=function(e){p&&o.isButton()&&v&&!o.isStandaloneLabel()&&(v.removeClass("h5p-left-label"),parseInt(p.css("left"))+v.position().left+v.outerWidth()>e&&v.addClass("h5p-left-label"))},o.setPosition=function(t,n){e.x=t,e.y=n,p.css({left:t+"%",top:n+"%"})},o.setSize=function(t,n){t&&(e.width=t),n&&(e.height=n),H5P.trigger(k,"resize")},o.remove=function(){p&&(o.trigger("domHidden",{$dom:p,key:"videoProgressedPast"},{bubbles:!0,external:!0}),k&&k.trigger("hide"),o.trigger("hide",p),p.detach(),p=void 0)},o.reCreate=function(){y=X(),o.isStandaloneLabel()||(g.params=g.params||{},k=H5P.newRunnable(g,t.contentId,void 0,void 0,{parent:t,editing:void 0!==t.editor}),void 0===o.maxScore&&k.getMaxScore&&(o.maxScore=k.getMaxScore()),g.userDatas&&J(k)&&(o.score=k.getScore()),t.isTask||void 0===t.options.assets.endscreens||(k.isTask||void 0===k.isTask&&void 0!==k.showSolutions)&&(t.isTask=!0),k.on&&(k.on("xAPI",function(e){var n=e.getVerifiedStatementValue(["context","contextActivities","parent"])||[],i=e.getContentXAPIId(t),r="completed"===e.getVerb()||"answered"===e.getVerb();n.some(function(e){return e.id===i})&&r&&e.getMaxScore()&&(o.score=null==e.getScore()?0:e.getScore(),o.maxScore=o.maxScore?o.maxScore:e.getMaxScore(),Q()),o.setLastXAPIVerb(e.getVerb()),o.trigger(e)}),k.on("question-finished",function(){Q()}),k.on("resize",function(){delete o.dialogWidth,t&&t.dnb&&t.dnb.dialog.removeStaticWidth()}),"H5P.IVHotspot"===S&&k.on("goto",W),"H5P.GoToQuestion"===S&&k.on("chosen",W)))};var J=function(e){return"undefined"!==(void 0===e?"undefined":i(e))&&"function"==typeof e.getScore&&"function"==typeof e.getMaxScore};o.setDnbElement=function(e){return $!==e&&($=e,!0)},o.hasFullScore=function(){return o.score>=o.maxScore},o.getLibraryName=function(){return S},o.getMetadata=function(){return A},o.getTitle=function(){return P},o.isAnswerable=function(){return-1===d.indexOf(o.getLibraryName())&&!o.isStandaloneLabel()},o.setProgress=function(e){this.progress=e},o.getProgress=function(){return this.progress},o.setLastXAPIVerb=function(e){w=e},o.getLastXAPIVerb=function(){return w},o.getClass=function(){return y},o.getCopyrights=function(){if(!o.isStandaloneLabel()){var n=H5P.newRunnable(g,t.contentId);if(void 0!==n){var i=new H5P.ContentCopyrights;return i.addContent(H5P.getCopyrights(n,e,t.contentId)),i.setLabel(P+" "+H5P.InteractiveVideo.humanizeTime(e.duration.from)+" - "+H5P.InteractiveVideo.humanizeTime(e.duration.to)),i}}},o.getXAPIData=function(){if(k&&(k.getXAPIData instanceof Function||"function"==typeof k.getXAPIData))return k.getXAPIData()},o.getSubcontentId=function(){return g.subContentId},o.getElement=function(){return p},o.focusOnFirstTabbableElement=function(){if(p){var e=s(p.get(0)).find("[tabindex]");e&&e.length?e.get(0).focus():o.focus()}},o.focus=function(){p&&p.focus()},o.getClipboardData=function(){return H5P.DragNBar.clipboardify(H5PEditor.InteractiveVideo.clipboardKey,e,"action")},o.repositionToWrapper=function(t){if(p&&"H5P.IVHotspot"!==S&&"H5P.FreeTextQuestion"!==S){if(E&&(p.css({top:e.y+"%",left:e.x+"%"}),p.css(o.isButton()?{height:"",width:""}:_()),E=!1),p.position().top+p.height()>t.height()){var n=(t.height()-p.height())/t.height()*100;if(n<0){n=0;var i=t.height()/parseFloat(p.css("font-size"));p.css("height",i+"em")}p.css("top",n+"%"),E=!0}if(p.position().left+p.width()>t.width()){var r=(t.width()-p.width())/t.width()*100;if(r<0){r=0;var s=t.width()/parseFloat(p.css("font-size"));p.css("width",s+"em")}p.css("left",r+"%"),E=!0}}},o.resetTask=function(){void 0!==g.userDatas&&void 0!==g.userDatas.state&&delete g.userDatas.state,delete o.score,delete o.maxScore,o.reCreate()},o.getInstance=function(){return k},o.reCreate()}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(0),s=H5P.jQuery,a=function(e){return void 0!==e&&"string"==typeof e&&e.length>0},l=function(e){return a(e)?s("<div>"+e+"</div>").text():void 0},c={TIME_CODE:"timecode",URL:"url"},u=function(e,t){return void 0!==e.goto&&e.goto.type===t},d=["H5P.Image","H5P.Nil","H5P.Table","H5P.Link","H5P.GoToQuestion","H5P.IVHotspot","H5P.Text"],h=function(e,t){return-1!==d.indexOf(e)||u(t,c.TIME_CODE)},p=["H5P.Text","H5P.Table"],f=function(e){return-1!==p.indexOf(e)};o.prototype=Object.create(H5P.EventDispatcher.prototype),o.prototype.constructor=o,o.PROGRESS_INTERACTED=0,o.PROGRESS_ANSWERED=1,t.default=o},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e,t){return-1!==e.indexOf(t)},s=function(){function e(t){o(this,e),this.l10n=t;var n=document.createElement("div");n.classList.add("h5p-iv-interactions-announcer"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-hidden","true"),this.interactionsAnnouncer=n;var i=document.createElement("div");i.classList.add("h5p-iv-hotkey-instructions"),i.textContent=t.navigationHotkeyInstructions,this.hotkeyInstructor=i,this.announcedInteractionIds=[]}return i(e,[{key:"getHotkeyInstructor",value:function(){return this.hotkeyInstructor}},{key:"getInteractionAnnouncer",value:function(){return this.interactionsAnnouncer}},{key:"announceInteractions",value:function(e){var t=this,n=e.filter(function(e){return e.isVisible()}),o=n.filter(function(e){return!r(t.announcedInteractionIds,e.getSubcontentId())});o.length>0&&(this.interactionsAnnouncer.textContent="",this.interactionsAnnouncer.textContent="\n        "+this.getAnnouncementMessage(o.length)+" \n        "+this.getTitleAnnouncement(o.length,o[0])+"\n        "+this.getPauseAnnouncement(o)),this.announcedInteractionIds=n.map(function(e){return e.getSubcontentId()})}},{key:"getAnnouncementMessage",value:function(e){return 0===e?"":1===e?this.l10n.singleInteractionAnnouncement:this.l10n.multipleInteractionsAnnouncement}},{key:"getTitleAnnouncement",value:function(e,t){return 1===e?t.getTitle():""}},{key:"getPauseAnnouncement",value:function(e){return e.some(function(e){return e.pause()})?". "+this.l10n.videoPausedAnnouncement:""}}]),e}();t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=H5P.jQuery,s=!!navigator.userAgent.match(/iPod|iPhone|iPad/g),a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{content:"",maxWidth:"auto",style:"h5p-interactive-video-bubble",mode:"centered"};o(this,e),this.$reference=t,this.maxWidth=n.maxWidth,this.style=n.style,this.mode=n.mode,this.$tail=r("<div/>",{class:this.style+"-tail"}),this.$innerTail=r("<div/>",{class:this.style+"-inner-tail"}),this.$content=r("<div/>",{class:this.style+"-text"}),"string"==typeof n.content?this.$content.html(n.content):this.$content.append(n.content),this.$innerBubble=r("<div/>",{class:this.style+"-inner"}).append(this.$content).prepend(this.$innerTail),this.$h5pContainer=this.$reference.closest(".h5p-interactive-video"),this.$bubble=r("<div/>",{class:this.style,"aria-live":"assertive"}).append([this.$tail,this.$innerBubble]).addClass(this.style+"-inactive").appendTo(this.$h5pContainer),s&&H5P.$body.css("cursor","pointer"),"centered"===this.mode&&this.$bubble.css({width:"auto"===this.maxWidth?"auto":this.maxWidth+"px"}),this.update()}return i(e,[{key:"update",value:function(){var e=this,t=this.getOffsetBetween(this.$h5pContainer,this.$reference),n="full"===this.mode?this.$bubble.outerWidth():Math.min(.9*t.outerWidth,"auto"===this.maxWidth?this.$bubble.outerWidth():this.maxWidth),o=this.getBubblePosition(n,t,this.mode);"centered"===this.mode&&this.$bubble.css({bottom:void 0===o.bottom?void 0:o.bottom+"px",left:o.left+"px"}),setTimeout(function(){var t=e.getTailPosition(e.$reference),n={bottom:t.bottom+"px",left:"string"==typeof t.left?t.left:t.left+"px"};e.$tail.css(n),e.$innerTail.css(n)},75)}},{key:"animate",value:function(){var e=this;this.$bubble.hasClass(this.style+"-inactive")&&(this.$bubble.removeClass(this.style+"-inactive").addClass(this.style+"-active"),setTimeout(function(){e.$bubble.removeClass(e.style+"-active").addClass(e.style+"-inactive")},2e3))}},{key:"setContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$content.html(e),this.update()}},{key:"getContent",value:function(){return this.$content.get(0).outerHTML}},{key:"isActive",value:function(){return this.$bubble.hasClass(this.style+"-active")}},{key:"toggle",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=void 0===e?!this.isActive():e,e&&n?(setTimeout(function(){t.$bubble.removeClass(t.style+"-preparing").addClass(t.style+"-active")},100),this.$bubble.removeClass(this.style+"-inactive").addClass(this.style+"-preparing")):this.$bubble.toggleClass(this.style+"-inactive",!e).toggleClass(this.style+"-active",e),this.update()}},{key:"getBubblePosition",value:function(e,t,n){var o=e/2;return{bottom:"full"===n?void 0:t.bottom+t.innerHeight+4,left:"full"===n?(t.outerWidth-e)/2:t.left-o+16}}},{key:"getTailPosition",value:function(e){return{left:e.offset().left-this.$tail.parent().offset().left+8,top:-6,bottom:-6}}},{key:"getOffsetBetween",value:function(e,t){var n=e[0].getBoundingClientRect(),o=t[0].getBoundingClientRect();return{top:o.top-n.top,right:n.right-o.right,bottom:n.bottom-o.bottom,left:o.left-n.left+parseInt(t.css("marginLeft")),innerWidth:o.width,innerHeight:o.height,outerWidth:n.width,outerHeight:n.height}}},{key:"fullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this.isMobilePhone(),i=e&&!o&&void 0!==t&&void 0!==n,r={maxHeight:"",top:""};i&&(r.maxHeight="calc("+n+"px - 1em - 9px)",r.top="calc((("+(t-n)+"px + 1em) / 2) - 9px)"),this.$bubble.toggleClass("mobile-fullscreen",o&&e),this.$bubble.css(r)}},{key:"isMobilePhone",value:function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.substr(0,4))}}]),e}();t.default=a},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=H5P.jQuery,l="h5p-interactive-video-endscreen",c="h5p-interactive-video-endscreen-submit-button-hidden",u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.parent=e,r.l10n=a.extend({title:"@answered Questions answered",information:"You have answered @answered questions, click below to submit your answers.",informationNoAnswers:"You have not answered any questions.",informationMustHaveAnswer:"You have to answer at least one question before you can submit your answers.",submitButton:"Submit Answers",submitMessage:"Your answers have been submitted!",tableRowAnswered:"Answered questions",tableRowScore:"Score",answeredScore:"answered"},n.l10n),r.buildDOM(),r}return r(t,e),s(t,[{key:"buildDOM",value:function(){var e=this;this.$endscreenIntroductionTitleText=a("<div/>",{class:l+"-introduction-title-text"});var t=a("<div>",{role:"button",class:l+"-close-button",tabindex:"0","aria-label":this.parent.l10n.close}).click(function(){e.parent.toggleEndscreen(!1)}).keydown(function(t){-1!==[13,32].indexOf(t.which)&&(e.parent.toggleEndscreen(!1),t.preventDefault())}),n=a("<div/>",{class:l+"-introduction-title"}).append([this.$endscreenIntroductionTitleText,t]);this.$endscreenIntroductionText=a("<div/>",{class:l+"-introduction-text"}),this.$endscreenSubmitButton=a("<div/>",{class:l+"-submit-button-container"}).addClass(c).append(H5P.JoubelUI.createButton({class:l+"-submit-button",html:this.l10n.submitButton}).click(function(t){e.handleSubmit(),t.preventDefault()}).keydown(function(t){-1!==[13,32].indexOf(t.which)&&(e.handleSubmit(),t.preventDefault())})),this.$endscreenOverviewTitle=a("<div/>",{class:l+"-overview-title"}).append(a("<div/>",{class:l+"-overview-title-answered-questions",html:this.l10n.tableRowAnswered})).append(a("<div/>",{class:l+"-overview-title-score",html:this.l10n.tableRowScore})),this.$endscreenBottomTable=a("<div/>",{class:l+"-overview-table"}),this.$endscreen=a("<div/>",{class:l}).append(a("<div/>",{class:l+"-introduction"}).append(a("<div/>",{class:l+"-star-symbol"})).append(a("<div/>",{class:l+"-introduction-container"}).append([n,this.$endscreenIntroductionText,this.$endscreenSubmitButton]))).append(a("<div/>",{class:l+"-overview"}).append(this.$endscreenOverviewTitle).append(this.$endscreenBottomTable))}},{key:"handleSubmit",value:function(){var e=this;this.$endscreenSubmitButton.hasClass(c)||(this.$endscreenSubmitButton.addClass(c),this.$endscreenIntroductionText.html('<div class="'+l+'-introduction-text-submitted">'+this.l10n.submitMessage+"</div>"),this.answered.forEach(function(t){if("completed"!==t.getLastXAPIVerb()&&"answered"!==t.getLastXAPIVerb()){var n=new H5P.XAPIEvent;n.data.statement=t.getXAPIData().statement,t.setLastXAPIVerb(n.getVerb()),e.trigger(n)}}),this.parent.triggerXAPIScored(this.parent.getUsersScore(),this.parent.getUsersMaxScore(),"completed"))}},{key:"getDOM",value:function(){return this.$endscreen}},{key:"buildTableRow",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.l10n.answered,i=this.parent.skippingPrevented()?" "+l+"-no-link":"";return a("<div/>",{class:l+"-overview-table-row"+i}).append(a("<div/>",{class:l+"-overview-table-row-time",html:H5P.InteractiveVideo.humanizeTime(e),role:"button"}).click(function(){n.jump(e)})).append(a("<div/>",{class:l+"-overview-table-row-title",html:t,role:"button"})).click(function(){n.jump(e)}).append(a("<div/>",{class:l+"-overview-table-row-score",html:o||this.l10n.tableAnswered}))}},{key:"jump",value:function(e){this.parent.skippingPrevented()||(this.parent.seek(e),this.parent.toggleEndscreen(!1))}},{key:"update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.answered=t.filter(function(e){return void 0!==e.getProgress()}).sort(function(e,t){return e.getDuration().from>t.getDuration().from}),this.$endscreenBottomTable.empty(),this.answered.forEach(function(t){var n=t.getDuration().from,o=e.getDescription(t),i=t.getInstance().getScore&&null!==t.getInstance().getScore()&&t.getInstance().getMaxScore?t.getInstance().getScore()+" / "+t.getInstance().getMaxScore():e.l10n.answeredScore;e.$endscreenBottomTable.append(e.buildTableRow(n,o,i))});var n=this.answered.length;this.$endscreenIntroductionTitleText.html(this.l10n.title.replace("@answered",n)),0===n?this.$endscreenIntroductionText.html('<div class="'+l+'-bold-text">'+this.l10n.informationNoAnswers+"</div><div>"+this.l10n.informationMustHaveAnswer+"<div>"):this.$endscreenIntroductionText.html(this.l10n.information.replace("@answered",n)),n>0&&this.$endscreenSubmitButton.removeClass(c)}},{key:"getDescription",value:function(e){return"function"==typeof e.getInstance&&"function"==typeof e.getInstance().getTitle?e.getInstance().getTitle():e.getTitle()}}]),t}(H5P.EventDispatcher);t.default=u}]);